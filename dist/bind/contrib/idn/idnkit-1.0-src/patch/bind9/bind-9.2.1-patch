IDN patch for bind-9.2.1
========================


This is a patch file for ISC BIND 9.2.1 to make it work with
internationalized domain names.  With this patch you'll get IDN-aware
dig/host/nslookup.

To apply this patch, you should go to the top directory of the BIND
distribution (where you see `README' file), then invoke `patch'
command like this:

	% patch -p0 < this-file

Then follow the instructions described in `README.idnkit' to compile
and install.


Index: README.idnkit
diff -c /dev/null mdn/othersrc/bind9/README.idnkit:1.2
*** README.idnkit	Mon May 27 16:53:24 2002
--- README.idnkit	Tue Mar 26 16:35:05 2002
***************
*** 0 ****
--- 1,113 ----
+ 
+ 			BIND-9 IDN patch
+ 
+ 	       Japan Network Information Center (JPNIC)
+ 
+ 
+ * What is this patch for?
+ 
+ This patch adds internationalized domain name (IDN) support to BIND-9.
+ You'll get internationalized version of dig/host/nslookup commands.
+ 
+     + internationalized dig/host/nslookup
+ 	dig/host/nslookup accepts non-ASCII domain names in the local
+ 	codeset (such as Shift JIS, Big5 or ISO8859-1) determined by
+ 	the locale information.  The domain names are normalized and
+ 	converted to the encoding on the DNS protocol, and sent to DNS
+ 	servers.  The replies are converted back to the local codeset
+ 	and displayed.
+ 
+ 
+ * Compilation & installation
+ 
+ 0. Prerequisite
+ 
+ You have to build and install idnkit before building this patched version
+ of bind-9.
+ 
+ 1. Running configure script
+ 
+ Run `configure' in the top directory.  See `README' for the
+ configuration options.
+ 
+ This patch adds the following 4 options to `configure'.  You should
+ at least specify `--with-idn' option to enable IDN support.
+ 
+     --with-idn[=IDN_PREFIX]
+ 	To enable IDN support, you have to specify `--with-idn' option.
+ 	The argument IDN_PREFIX is the install prefix of idnkit.  If
+ 	IDN_PREFIX is omitted, PREFIX (derived from `--prefix=PREFIX')
+ 	is assumed.
+ 
+     --with-libiconv[=LIBICONV_PREFIX]
+ 	Specify this option if idnkit you have installed links GNU
+ 	libiconv.  The argument LIBICONV_PREFIX is install prefix of
+ 	GNU libiconv.  If the argument is omitted, PREFIX (derived
+ 	from `--prefix=PREFIX') is assumed.
+ 
+ 	`--with-libiconv' is shorthand option for GNU libiconv.
+ 
+ 	    --with-libiconv=/usr/local
+ 
+ 	This is equivalent to:
+ 
+ 	    --with-iconv='-L/usr/local/lib -R/usr/local/lib -liconv'
+ 
+ 	`--with-libiconv' assumes that your C compiler has `-R'
+ 	option, and that the option adds the specified run-time path
+ 	to an exacutable binary.  If `-R' option of your compiler has
+ 	different meaning, or your compiler lacks the option, you
+ 	should use `--with-iconv' option instead.  Binary command
+ 	without run-time path information might be unexecutable.
+ 	In that case, you would see an error message like:
+ 
+ 	    error in loading shared libraries: libiconv.so.2: cannot
+ 	    open shared object file
+ 
+ 	If both `--with-libiconv' and `--with-iconv' options are
+ 	specified, `--with-iconv' is prior to `--with-libiconv'.
+ 
+     --with-iconv=ICONV_LIBSPEC
+ 	If your libc doens't provide iconv(), you need to specify the
+ 	library containing iconv() with this option.  `ICONV_LIBSPEC'
+ 	is the argument(s) to `cc' or `ld' to link the library, for
+ 	example, `--with-iconv="-L/usr/local/lib -liconv"'.
+ 	You don't need to specify the header file directory for "iconv.h"
+ 	to the compiler, as it isn't included directly by bind-9 with
+ 	this patch.
+ 
+     --with-idnlib=IDN_LIBSPEC
+ 	With this option, you can explicitly specify the argument(s)
+ 	to `cc' or `ld' to link the idnkit's library, `libidnkit'.  If
+ 	this option is not specified, `-L${PREFIX}/lib -lidnkit' is
+ 	assumed, where ${PREFIX} is the installation prefix specified
+ 	with `--with-idn' option above.  You may need to use this
+ 	option to specify extra argments, for example,
+ 	`--with-idnlib="-L/usr/local/lib -R/usr/local/lib -lidnkit"'.
+ 
+ Please consult `README' for other configuration options.
+ 
+ Note that if you want to specify some extra header file directories,
+ you should use the environment variable STD_CINCLUDES instead of
+ CFLAGS, as described in README.
+ 
+ 2. Compilation and installation
+ 
+ After running "configure", just do
+ 
+ 	make
+ 	make install
+ 
+ for compiling and installing.
+ 
+ 
+ * Contact information
+ 
+ Please see http//www.nic.ad.jp/jp/research/mdn/ for the latest news
+ about idnkit and this patch.
+ 
+ Bug reports and comments on this kit should be sent to
+ mdnkit-bugs@nic.ad.jp and mdn-cmt@nic.ad.jp, respectively.
+ 
+ 
+ ; $Id: bind-9.2.1-patch,v 1.1.1.1 2003-06-04 00:27:30 marka Exp $
Index: config.h.in
diff -c mdn/othersrc/bind9/config.h.in:1.1.1.6 mdn/othersrc/bind9/config.h.in:1.12
*** config.h.in	Tue Nov 27 16:55:45 2001
--- config.h.in	Tue Mar 19 16:45:35 2002
***************
*** 141,146 ****
--- 141,149 ----
  /* define if you have strerror in the C library. */
  #undef HAVE_STRERROR
  
+ /* Define if you have the setlocale function.  */
+ #undef HAVE_SETLOCALE
+ 
  /* Define if you have the <dlfcn.h> header file.  */
  #undef HAVE_DLFCN_H
  
***************
*** 150,155 ****
--- 153,161 ----
  /* Define if you have the <linux/capability.h> header file.  */
  #undef HAVE_LINUX_CAPABILITY_H
  
+ /* Define if you have the <locale.h> header file.  */
+ #undef HAVE_LOCALE_H
+ 
  /* Define if you have the <sys/prctl.h> header file.  */
  #undef HAVE_SYS_PRCTL_H
  
***************
*** 176,178 ****
--- 182,188 ----
  
  /* Define if you have the socket library (-lsocket).  */
  #undef HAVE_LIBSOCKET
+ 
+ /* define if idnkit support is to be included. */
+ #undef WITH_IDN
+ 
Index: configure
diff -c mdn/othersrc/bind9/configure:1.1.1.9 mdn/othersrc/bind9/configure:1.15
*** configure	Wed May 22 17:14:53 2002
--- configure	Mon May 27 12:10:14 2002
***************
*** 369,374 ****
--- 369,382 ----
    --with-kame[=PATH]	use Kame IPv6 [default path /usr/local/v6]"
  ac_help="$ac_help
    --disable-linux-caps	disable linux capabilities"
+ ac_help="$ac_help
+   --with-idn[=MPREFIX]   enable IDN support using idnkit [default PREFIX]"
+ ac_help="$ac_help
+   --with-libiconv[=IPREFIX]   GNU libiconv are in IPREFIX [default PREFIX]"
+ ac_help="$ac_help
+   --with-iconv[=LIBSPEC]   specify iconv library [default -liconv]"
+ ac_help="$ac_help
+   --with-idnlib=ARG    specify libidnkit"
  
  # Initialize some variables set by options.
  # The variables have the same names as the options, with
***************
*** 911,917 ****
  fi
  
  echo $ac_n "checking host system type""... $ac_c" 1>&6
! echo "configure:915: checking host system type" >&5
  
  host_alias=$host
  case "$host_alias" in
--- 919,925 ----
  fi
  
  echo $ac_n "checking host system type""... $ac_c" 1>&6
! echo "configure:923: checking host system type" >&5
  
  host_alias=$host
  case "$host_alias" in
***************
*** 933,939 ****
  
  
  echo $ac_n "checking whether ${MAKE-make} sets \${MAKE}""... $ac_c" 1>&6
! echo "configure:937: checking whether ${MAKE-make} sets \${MAKE}" >&5
  set dummy ${MAKE-make}; ac_make=`echo "$2" | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_prog_make_${ac_make}_set'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
--- 941,947 ----
  
  
  echo $ac_n "checking whether ${MAKE-make} sets \${MAKE}""... $ac_c" 1>&6
! echo "configure:945: checking whether ${MAKE-make} sets \${MAKE}" >&5
  set dummy ${MAKE-make}; ac_make=`echo "$2" | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_prog_make_${ac_make}_set'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
***************
*** 962,968 ****
  # Extract the first word of "ranlib", so it can be a program name with args.
  set dummy ranlib; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:966: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 970,976 ----
  # Extract the first word of "ranlib", so it can be a program name with args.
  set dummy ranlib; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:974: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 1001,1007 ****
  # SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
  # ./install, which can be erroneously created by make from ./install.sh.
  echo $ac_n "checking for a BSD compatible install""... $ac_c" 1>&6
! echo "configure:1005: checking for a BSD compatible install" >&5
  if test -z "$INSTALL"; then
  if eval "test \"`echo '$''{'ac_cv_path_install'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
--- 1009,1015 ----
  # SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
  # ./install, which can be erroneously created by make from ./install.sh.
  echo $ac_n "checking for a BSD compatible install""... $ac_c" 1>&6
! echo "configure:1013: checking for a BSD compatible install" >&5
  if test -z "$INSTALL"; then
  if eval "test \"`echo '$''{'ac_cv_path_install'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
***************
*** 1062,1068 ****
  # Extract the first word of "ar", so it can be a program name with args.
  set dummy ar; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:1066: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_AR'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 1070,1076 ----
  # Extract the first word of "ar", so it can be a program name with args.
  set dummy ar; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:1074: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_AR'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 1121,1127 ****
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:1125: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_ETAGS'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 1129,1135 ----
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:1133: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_ETAGS'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 1163,1169 ****
  #
  if test "X$ETAGS" != "X"; then
  	echo $ac_n "checking for Exuberant Ctags etags""... $ac_c" 1>&6
! echo "configure:1167: checking for Exuberant Ctags etags" >&5
  	if $ETAGS --version 2>&1 | grep 'Exuberant Ctags' >/dev/null 2>&1; then
  		echo "$ac_t""yes" 1>&6
  		ETAGS="$ETAGS -L"
--- 1171,1177 ----
  #
  if test "X$ETAGS" != "X"; then
  	echo $ac_n "checking for Exuberant Ctags etags""... $ac_c" 1>&6
! echo "configure:1175: checking for Exuberant Ctags etags" >&5
  	if $ETAGS --version 2>&1 | grep 'Exuberant Ctags' >/dev/null 2>&1; then
  		echo "$ac_t""yes" 1>&6
  		ETAGS="$ETAGS -L"
***************
*** 1181,1187 ****
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:1185: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_PERL'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 1189,1195 ----
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:1193: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_PERL'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 1328,1334 ****
  # Extract the first word of "gcc", so it can be a program name with args.
  set dummy gcc; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:1332: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 1336,1342 ----
  # Extract the first word of "gcc", so it can be a program name with args.
  set dummy gcc; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:1340: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 1358,1364 ****
    # Extract the first word of "cc", so it can be a program name with args.
  set dummy cc; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:1362: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 1366,1372 ----
    # Extract the first word of "cc", so it can be a program name with args.
  set dummy cc; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:1370: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 1409,1415 ****
        # Extract the first word of "cl", so it can be a program name with args.
  set dummy cl; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:1413: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 1417,1423 ----
        # Extract the first word of "cl", so it can be a program name with args.
  set dummy cl; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:1421: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 1441,1447 ****
  fi
  
  echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
! echo "configure:1445: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5
  
  ac_ext=c
  # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
--- 1449,1455 ----
  fi
  
  echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
! echo "configure:1453: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5
  
  ac_ext=c
  # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
***************
*** 1452,1463 ****
  
  cat > conftest.$ac_ext << EOF
  
! #line 1456 "configure"
  #include "confdefs.h"
  
  main(){return(0);}
  EOF
! if { (eval echo configure:1461: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    ac_cv_prog_cc_works=yes
    # If we can't run a trivial program, we are probably using a cross compiler.
    if (./conftest; exit) 2>/dev/null; then
--- 1460,1471 ----
  
  cat > conftest.$ac_ext << EOF
  
! #line 1464 "configure"
  #include "confdefs.h"
  
  main(){return(0);}
  EOF
! if { (eval echo configure:1469: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    ac_cv_prog_cc_works=yes
    # If we can't run a trivial program, we are probably using a cross compiler.
    if (./conftest; exit) 2>/dev/null; then
***************
*** 1483,1494 ****
    { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; exit 1; }
  fi
  echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
! echo "configure:1487: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
  echo "$ac_t""$ac_cv_prog_cc_cross" 1>&6
  cross_compiling=$ac_cv_prog_cc_cross
  
  echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
! echo "configure:1492: checking whether we are using GNU C" >&5
  if eval "test \"`echo '$''{'ac_cv_prog_gcc'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 1491,1502 ----
    { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; exit 1; }
  fi
  echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
! echo "configure:1495: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
  echo "$ac_t""$ac_cv_prog_cc_cross" 1>&6
  cross_compiling=$ac_cv_prog_cc_cross
  
  echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
! echo "configure:1500: checking whether we are using GNU C" >&5
  if eval "test \"`echo '$''{'ac_cv_prog_gcc'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 1497,1503 ****
    yes;
  #endif
  EOF
! if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1501: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
    ac_cv_prog_gcc=yes
  else
    ac_cv_prog_gcc=no
--- 1505,1511 ----
    yes;
  #endif
  EOF
! if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1509: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
    ac_cv_prog_gcc=yes
  else
    ac_cv_prog_gcc=no
***************
*** 1516,1522 ****
  ac_save_CFLAGS="$CFLAGS"
  CFLAGS=
  echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
! echo "configure:1520: checking whether ${CC-cc} accepts -g" >&5
  if eval "test \"`echo '$''{'ac_cv_prog_cc_g'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 1524,1530 ----
  ac_save_CFLAGS="$CFLAGS"
  CFLAGS=
  echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
! echo "configure:1528: checking whether ${CC-cc} accepts -g" >&5
  if eval "test \"`echo '$''{'ac_cv_prog_cc_g'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 1549,1555 ****
  
  
  echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
! echo "configure:1553: checking how to run the C preprocessor" >&5
  # On Suns, sometimes $CPP names a directory.
  if test -n "$CPP" && test -d "$CPP"; then
    CPP=
--- 1557,1563 ----
  
  
  echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
! echo "configure:1561: checking how to run the C preprocessor" >&5
  # On Suns, sometimes $CPP names a directory.
  if test -n "$CPP" && test -d "$CPP"; then
    CPP=
***************
*** 1564,1576 ****
    # On the NeXT, cc -E runs the code through the compiler's parser,
    # not just through cpp.
    cat > conftest.$ac_ext <<EOF
! #line 1568 "configure"
  #include "confdefs.h"
  #include <assert.h>
  Syntax Error
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
! { (eval echo configure:1574: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    :
--- 1572,1584 ----
    # On the NeXT, cc -E runs the code through the compiler's parser,
    # not just through cpp.
    cat > conftest.$ac_ext <<EOF
! #line 1576 "configure"
  #include "confdefs.h"
  #include <assert.h>
  Syntax Error
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
! { (eval echo configure:1582: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    :
***************
*** 1581,1593 ****
    rm -rf conftest*
    CPP="${CC-cc} -E -traditional-cpp"
    cat > conftest.$ac_ext <<EOF
! #line 1585 "configure"
  #include "confdefs.h"
  #include <assert.h>
  Syntax Error
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
! { (eval echo configure:1591: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    :
--- 1589,1601 ----
    rm -rf conftest*
    CPP="${CC-cc} -E -traditional-cpp"
    cat > conftest.$ac_ext <<EOF
! #line 1593 "configure"
  #include "confdefs.h"
  #include <assert.h>
  Syntax Error
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
! { (eval echo configure:1599: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    :
***************
*** 1598,1610 ****
    rm -rf conftest*
    CPP="${CC-cc} -nologo -E"
    cat > conftest.$ac_ext <<EOF
! #line 1602 "configure"
  #include "confdefs.h"
  #include <assert.h>
  Syntax Error
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
! { (eval echo configure:1608: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    :
--- 1606,1618 ----
    rm -rf conftest*
    CPP="${CC-cc} -nologo -E"
    cat > conftest.$ac_ext <<EOF
! #line 1610 "configure"
  #include "confdefs.h"
  #include <assert.h>
  Syntax Error
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
! { (eval echo configure:1616: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    :
***************
*** 1629,1640 ****
  echo "$ac_t""$CPP" 1>&6
  
  echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
! echo "configure:1633: checking for ANSI C header files" >&5
  if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 1638 "configure"
  #include "confdefs.h"
  #include <stdlib.h>
  #include <stdarg.h>
--- 1637,1648 ----
  echo "$ac_t""$CPP" 1>&6
  
  echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
! echo "configure:1641: checking for ANSI C header files" >&5
  if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 1646 "configure"
  #include "confdefs.h"
  #include <stdlib.h>
  #include <stdarg.h>
***************
*** 1642,1648 ****
  #include <float.h>
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
! { (eval echo configure:1646: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    rm -rf conftest*
--- 1650,1656 ----
  #include <float.h>
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
! { (eval echo configure:1654: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    rm -rf conftest*
***************
*** 1659,1665 ****
  if test $ac_cv_header_stdc = yes; then
    # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
  cat > conftest.$ac_ext <<EOF
! #line 1663 "configure"
  #include "confdefs.h"
  #include <string.h>
  EOF
--- 1667,1673 ----
  if test $ac_cv_header_stdc = yes; then
    # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
  cat > conftest.$ac_ext <<EOF
! #line 1671 "configure"
  #include "confdefs.h"
  #include <string.h>
  EOF
***************
*** 1677,1683 ****
  if test $ac_cv_header_stdc = yes; then
    # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
  cat > conftest.$ac_ext <<EOF
! #line 1681 "configure"
  #include "confdefs.h"
  #include <stdlib.h>
  EOF
--- 1685,1691 ----
  if test $ac_cv_header_stdc = yes; then
    # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
  cat > conftest.$ac_ext <<EOF
! #line 1689 "configure"
  #include "confdefs.h"
  #include <stdlib.h>
  EOF
***************
*** 1698,1704 ****
    :
  else
    cat > conftest.$ac_ext <<EOF
! #line 1702 "configure"
  #include "confdefs.h"
  #include <ctype.h>
  #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
--- 1706,1712 ----
    :
  else
    cat > conftest.$ac_ext <<EOF
! #line 1710 "configure"
  #include "confdefs.h"
  #include <ctype.h>
  #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
***************
*** 1709,1715 ****
  exit (0); }
  
  EOF
! if { (eval echo configure:1713: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    :
  else
--- 1717,1723 ----
  exit (0); }
  
  EOF
! if { (eval echo configure:1721: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    :
  else
***************
*** 1737,1753 ****
  do
  ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
! echo "configure:1741: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 1746 "configure"
  #include "confdefs.h"
  #include <$ac_hdr>
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
! { (eval echo configure:1751: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    rm -rf conftest*
--- 1745,1761 ----
  do
  ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
! echo "configure:1749: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 1754 "configure"
  #include "confdefs.h"
  #include <$ac_hdr>
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
! { (eval echo configure:1759: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    rm -rf conftest*
***************
*** 1775,1786 ****
  
  
  echo $ac_n "checking for working const""... $ac_c" 1>&6
! echo "configure:1779: checking for working const" >&5
  if eval "test \"`echo '$''{'ac_cv_c_const'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 1784 "configure"
  #include "confdefs.h"
  
  int main() {
--- 1783,1794 ----
  
  
  echo $ac_n "checking for working const""... $ac_c" 1>&6
! echo "configure:1787: checking for working const" >&5
  if eval "test \"`echo '$''{'ac_cv_c_const'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 1792 "configure"
  #include "confdefs.h"
  
  int main() {
***************
*** 1829,1835 ****
  
  ; return 0; }
  EOF
! if { (eval echo configure:1833: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_c_const=yes
  else
--- 1837,1843 ----
  
  ; return 0; }
  EOF
! if { (eval echo configure:1841: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_c_const=yes
  else
***************
*** 1850,1870 ****
  fi
  
  echo $ac_n "checking for inline""... $ac_c" 1>&6
! echo "configure:1854: checking for inline" >&5
  if eval "test \"`echo '$''{'ac_cv_c_inline'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    ac_cv_c_inline=no
  for ac_kw in inline __inline__ __inline; do
    cat > conftest.$ac_ext <<EOF
! #line 1861 "configure"
  #include "confdefs.h"
  
  int main() {
  } $ac_kw foo() {
  ; return 0; }
  EOF
! if { (eval echo configure:1868: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_c_inline=$ac_kw; break
  else
--- 1858,1878 ----
  fi
  
  echo $ac_n "checking for inline""... $ac_c" 1>&6
! echo "configure:1862: checking for inline" >&5
  if eval "test \"`echo '$''{'ac_cv_c_inline'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    ac_cv_c_inline=no
  for ac_kw in inline __inline__ __inline; do
    cat > conftest.$ac_ext <<EOF
! #line 1869 "configure"
  #include "confdefs.h"
  
  int main() {
  } $ac_kw foo() {
  ; return 0; }
  EOF
! if { (eval echo configure:1876: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_c_inline=$ac_kw; break
  else
***************
*** 1890,1901 ****
  esac
  
  echo $ac_n "checking for sysctlbyname""... $ac_c" 1>&6
! echo "configure:1894: checking for sysctlbyname" >&5
  if eval "test \"`echo '$''{'ac_cv_func_sysctlbyname'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 1899 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char sysctlbyname(); below.  */
--- 1898,1909 ----
  esac
  
  echo $ac_n "checking for sysctlbyname""... $ac_c" 1>&6
! echo "configure:1902: checking for sysctlbyname" >&5
  if eval "test \"`echo '$''{'ac_cv_func_sysctlbyname'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 1907 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char sysctlbyname(); below.  */
***************
*** 1918,1924 ****
  
  ; return 0; }
  EOF
! if { (eval echo configure:1922: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_sysctlbyname=yes"
  else
--- 1926,1932 ----
  
  ; return 0; }
  EOF
! if { (eval echo configure:1930: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_sysctlbyname=yes"
  else
***************
*** 1946,1954 ****
  # is reported to not support "static inline" (RT #1212).
  #
  echo $ac_n "checking for static inline breakage""... $ac_c" 1>&6
! echo "configure:1950: checking for static inline breakage" >&5
  cat > conftest.$ac_ext <<EOF
! #line 1952 "configure"
  #include "confdefs.h"
  
  int main() {
--- 1954,1962 ----
  # is reported to not support "static inline" (RT #1212).
  #
  echo $ac_n "checking for static inline breakage""... $ac_c" 1>&6
! echo "configure:1958: checking for static inline breakage" >&5
  cat > conftest.$ac_ext <<EOF
! #line 1960 "configure"
  #include "confdefs.h"
  
  int main() {
***************
*** 1965,1971 ****
  	
  ; return 0; }
  EOF
! if { (eval echo configure:1969: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""no" 1>&6
  else
--- 1973,1979 ----
  	
  ; return 0; }
  EOF
! if { (eval echo configure:1977: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""no" 1>&6
  else
***************
*** 1981,1992 ****
  rm -f conftest*
  
  echo $ac_n "checking for size_t""... $ac_c" 1>&6
! echo "configure:1985: checking for size_t" >&5
  if eval "test \"`echo '$''{'ac_cv_type_size_t'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 1990 "configure"
  #include "confdefs.h"
  #include <sys/types.h>
  #if STDC_HEADERS
--- 1989,2000 ----
  rm -f conftest*
  
  echo $ac_n "checking for size_t""... $ac_c" 1>&6
! echo "configure:1993: checking for size_t" >&5
  if eval "test \"`echo '$''{'ac_cv_type_size_t'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 1998 "configure"
  #include "confdefs.h"
  #include <sys/types.h>
  #if STDC_HEADERS
***************
*** 2014,2025 ****
  fi
  
  echo $ac_n "checking for ssize_t""... $ac_c" 1>&6
! echo "configure:2018: checking for ssize_t" >&5
  if eval "test \"`echo '$''{'ac_cv_type_ssize_t'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 2023 "configure"
  #include "confdefs.h"
  #include <sys/types.h>
  #if STDC_HEADERS
--- 2022,2033 ----
  fi
  
  echo $ac_n "checking for ssize_t""... $ac_c" 1>&6
! echo "configure:2026: checking for ssize_t" >&5
  if eval "test \"`echo '$''{'ac_cv_type_ssize_t'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 2031 "configure"
  #include "confdefs.h"
  #include <sys/types.h>
  #if STDC_HEADERS
***************
*** 2047,2058 ****
  fi
  
  echo $ac_n "checking whether time.h and sys/time.h may both be included""... $ac_c" 1>&6
! echo "configure:2051: checking whether time.h and sys/time.h may both be included" >&5
  if eval "test \"`echo '$''{'ac_cv_header_time'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 2056 "configure"
  #include "confdefs.h"
  #include <sys/types.h>
  #include <sys/time.h>
--- 2055,2066 ----
  fi
  
  echo $ac_n "checking whether time.h and sys/time.h may both be included""... $ac_c" 1>&6
! echo "configure:2059: checking whether time.h and sys/time.h may both be included" >&5
  if eval "test \"`echo '$''{'ac_cv_header_time'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 2064 "configure"
  #include "confdefs.h"
  #include <sys/types.h>
  #include <sys/time.h>
***************
*** 2061,2067 ****
  struct tm *tp;
  ; return 0; }
  EOF
! if { (eval echo configure:2065: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_header_time=yes
  else
--- 2069,2075 ----
  struct tm *tp;
  ; return 0; }
  EOF
! if { (eval echo configure:2073: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_header_time=yes
  else
***************
*** 2082,2097 ****
  fi
  
  echo $ac_n "checking for long long""... $ac_c" 1>&6
! echo "configure:2086: checking for long long" >&5
  cat > conftest.$ac_ext <<EOF
! #line 2088 "configure"
  #include "confdefs.h"
  
  int main() {
  long long i = 0; return (0);
  ; return 0; }
  EOF
! if { (eval echo configure:2095: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  		ISC_PLATFORM_HAVELONGLONG="#define ISC_PLATFORM_HAVELONGLONG 1"
--- 2090,2105 ----
  fi
  
  echo $ac_n "checking for long long""... $ac_c" 1>&6
! echo "configure:2094: checking for long long" >&5
  cat > conftest.$ac_ext <<EOF
! #line 2096 "configure"
  #include "confdefs.h"
  
  int main() {
  long long i = 0; return (0);
  ; return 0; }
  EOF
! if { (eval echo configure:2103: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  		ISC_PLATFORM_HAVELONGLONG="#define ISC_PLATFORM_HAVELONGLONG 1"
***************
*** 2111,2119 ****
  case $ac_cv_header_unistd_h in
  yes)
  echo $ac_n "checking if unistd.h defines fd_set""... $ac_c" 1>&6
! echo "configure:2115: checking if unistd.h defines fd_set" >&5
  cat > conftest.$ac_ext <<EOF
! #line 2117 "configure"
  #include "confdefs.h"
  
  #include <unistd.h>
--- 2119,2127 ----
  case $ac_cv_header_unistd_h in
  yes)
  echo $ac_n "checking if unistd.h defines fd_set""... $ac_c" 1>&6
! echo "configure:2123: checking if unistd.h defines fd_set" >&5
  cat > conftest.$ac_ext <<EOF
! #line 2125 "configure"
  #include "confdefs.h"
  
  #include <unistd.h>
***************
*** 2121,2127 ****
  fd_set read_set; return (0);
  ; return 0; }
  EOF
! if { (eval echo configure:2125: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  	 ISC_PLATFORM_NEEDSYSSELECTH="#undef ISC_PLATFORM_NEEDSYSSELECTH"
--- 2129,2135 ----
  fd_set read_set; return (0);
  ; return 0; }
  EOF
! if { (eval echo configure:2133: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  	 ISC_PLATFORM_NEEDSYSSELECTH="#undef ISC_PLATFORM_NEEDSYSSELECTH"
***************
*** 2163,2176 ****
  # Find the machine's endian flavor.
  #
  echo $ac_n "checking whether byte ordering is bigendian""... $ac_c" 1>&6
! echo "configure:2167: checking whether byte ordering is bigendian" >&5
  if eval "test \"`echo '$''{'ac_cv_c_bigendian'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    ac_cv_c_bigendian=unknown
  # See if sys/param.h defines the BYTE_ORDER macro.
  cat > conftest.$ac_ext <<EOF
! #line 2174 "configure"
  #include "confdefs.h"
  #include <sys/types.h>
  #include <sys/param.h>
--- 2171,2184 ----
  # Find the machine's endian flavor.
  #
  echo $ac_n "checking whether byte ordering is bigendian""... $ac_c" 1>&6
! echo "configure:2175: checking whether byte ordering is bigendian" >&5
  if eval "test \"`echo '$''{'ac_cv_c_bigendian'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    ac_cv_c_bigendian=unknown
  # See if sys/param.h defines the BYTE_ORDER macro.
  cat > conftest.$ac_ext <<EOF
! #line 2182 "configure"
  #include "confdefs.h"
  #include <sys/types.h>
  #include <sys/param.h>
***************
*** 2181,2191 ****
  #endif
  ; return 0; }
  EOF
! if { (eval echo configure:2185: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    # It does; now see whether it defined to BIG_ENDIAN or not.
  cat > conftest.$ac_ext <<EOF
! #line 2189 "configure"
  #include "confdefs.h"
  #include <sys/types.h>
  #include <sys/param.h>
--- 2189,2199 ----
  #endif
  ; return 0; }
  EOF
! if { (eval echo configure:2193: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    # It does; now see whether it defined to BIG_ENDIAN or not.
  cat > conftest.$ac_ext <<EOF
! #line 2197 "configure"
  #include "confdefs.h"
  #include <sys/types.h>
  #include <sys/param.h>
***************
*** 2196,2202 ****
  #endif
  ; return 0; }
  EOF
! if { (eval echo configure:2200: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_c_bigendian=yes
  else
--- 2204,2210 ----
  #endif
  ; return 0; }
  EOF
! if { (eval echo configure:2208: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_c_bigendian=yes
  else
***************
*** 2216,2222 ****
      { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
  else
    cat > conftest.$ac_ext <<EOF
! #line 2220 "configure"
  #include "confdefs.h"
  main () {
    /* Are we little or big endian?  From Harbison&Steele.  */
--- 2224,2230 ----
      { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
  else
    cat > conftest.$ac_ext <<EOF
! #line 2228 "configure"
  #include "confdefs.h"
  main () {
    /* Are we little or big endian?  From Harbison&Steele.  */
***************
*** 2229,2235 ****
    exit (u.c[sizeof (long) - 1] == 1);
  }
  EOF
! if { (eval echo configure:2233: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    ac_cv_c_bigendian=no
  else
--- 2237,2243 ----
    exit (u.c[sizeof (long) - 1] == 1);
  }
  EOF
! if { (eval echo configure:2241: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    ac_cv_c_bigendian=no
  else
***************
*** 2257,2263 ****
  # was --with-openssl specified?
  #
  echo $ac_n "checking for OpenSSL library""... $ac_c" 1>&6
! echo "configure:2261: checking for OpenSSL library" >&5
  # Check whether --with-openssl or --without-openssl was given.
  if test "${with_openssl+set}" = set; then
    withval="$with_openssl"
--- 2265,2271 ----
  # was --with-openssl specified?
  #
  echo $ac_n "checking for OpenSSL library""... $ac_c" 1>&6
! echo "configure:2269: checking for OpenSSL library" >&5
  # Check whether --with-openssl or --without-openssl was given.
  if test "${with_openssl+set}" = set; then
    withval="$with_openssl"
***************
*** 2298,2304 ****
  		echo "$ac_t""using openssl from $use_openssl/lib and $use_openssl/include" 1>&6
  
  		echo $ac_n "checking OpenSSL library version""... $ac_c" 1>&6
! echo "configure:2302: checking OpenSSL library version" >&5
  		saved_cflags="$CFLAGS"
  		saved_libs="$LIBS"
  		CFLAGS="$CFLAGS $DST_OPENSSL_INC"
--- 2306,2312 ----
  		echo "$ac_t""using openssl from $use_openssl/lib and $use_openssl/include" 1>&6
  
  		echo $ac_n "checking OpenSSL library version""... $ac_c" 1>&6
! echo "configure:2310: checking OpenSSL library version" >&5
  		saved_cflags="$CFLAGS"
  		saved_libs="$LIBS"
  		CFLAGS="$CFLAGS $DST_OPENSSL_INC"
***************
*** 2307,2313 ****
    echo "$ac_t""assuming target platform has compatible version" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 2311 "configure"
  #include "confdefs.h"
  
  #include <stdio.h>
--- 2315,2321 ----
    echo "$ac_t""assuming target platform has compatible version" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 2319 "configure"
  #include "confdefs.h"
  
  #include <stdio.h>
***************
*** 2322,2328 ****
  }
  
  EOF
! if { (eval echo configure:2326: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    echo "$ac_t""ok" 1>&6
  else
--- 2330,2336 ----
  }
  
  EOF
! if { (eval echo configure:2334: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    echo "$ac_t""ok" 1>&6
  else
***************
*** 2387,2393 ****
  # was --with-randomdev specified?
  #
  echo $ac_n "checking for random device""... $ac_c" 1>&6
! echo "configure:2391: checking for random device" >&5
  # Check whether --with-randomdev or --without-randomdev was given.
  if test "${with_randomdev+set}" = set; then
    withval="$with_randomdev"
--- 2395,2401 ----
  # was --with-randomdev specified?
  #
  echo $ac_n "checking for random device""... $ac_c" 1>&6
! echo "configure:2399: checking for random device" >&5
  # Check whether --with-randomdev or --without-randomdev was given.
  if test "${with_randomdev+set}" = set; then
    withval="$with_randomdev"
***************
*** 2411,2417 ****
  		
  ac_safe=`echo "$devrandom" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $devrandom""... $ac_c" 1>&6
! echo "configure:2415: checking for $devrandom" >&5
  if eval "test \"`echo '$''{'ac_cv_file_$ac_safe'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 2419,2425 ----
  		
  ac_safe=`echo "$devrandom" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $devrandom""... $ac_c" 1>&6
! echo "configure:2423: checking for $devrandom" >&5
  if eval "test \"`echo '$''{'ac_cv_file_$ac_safe'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 2463,2469 ****
  #
  
  echo $ac_n "checking whether to build with thread support""... $ac_c" 1>&6
! echo "configure:2467: checking whether to build with thread support" >&5
  
  case $host in
  *-dec-osf*)
--- 2471,2477 ----
  #
  
  echo $ac_n "checking whether to build with thread support""... $ac_c" 1>&6
! echo "configure:2475: checking whether to build with thread support" >&5
  
  case $host in
  *-dec-osf*)
***************
*** 2551,2557 ****
  		# experiment with it.
  		CC="gcc"
  		echo $ac_n "checking which NetBSD thread library to use""... $ac_c" 1>&6
! echo "configure:2555: checking which NetBSD thread library to use" >&5
  
  		# Check whether --with-ptl2 or --without-ptl2 was given.
  if test "${with_ptl2+set}" = set; then
--- 2559,2565 ----
  		# experiment with it.
  		CC="gcc"
  		echo $ac_n "checking which NetBSD thread library to use""... $ac_c" 1>&6
! echo "configure:2563: checking which NetBSD thread library to use" >&5
  
  		# Check whether --with-ptl2 or --without-ptl2 was given.
  if test "${with_ptl2+set}" = set; then
***************
*** 2590,2596 ****
  		;;
  		*)
  			echo $ac_n "checking for pthread_create in -lpthread""... $ac_c" 1>&6
! echo "configure:2594: checking for pthread_create in -lpthread" >&5
  ac_lib_var=`echo pthread'_'pthread_create | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
--- 2598,2604 ----
  		;;
  		*)
  			echo $ac_n "checking for pthread_create in -lpthread""... $ac_c" 1>&6
! echo "configure:2602: checking for pthread_create in -lpthread" >&5
  ac_lib_var=`echo pthread'_'pthread_create | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
***************
*** 2598,2604 ****
    ac_save_LIBS="$LIBS"
  LIBS="-lpthread  $LIBS"
  cat > conftest.$ac_ext <<EOF
! #line 2602 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
--- 2606,2612 ----
    ac_save_LIBS="$LIBS"
  LIBS="-lpthread  $LIBS"
  cat > conftest.$ac_ext <<EOF
! #line 2610 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
***************
*** 2609,2615 ****
  pthread_create()
  ; return 0; }
  EOF
! if { (eval echo configure:2613: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
--- 2617,2623 ----
  pthread_create()
  ; return 0; }
  EOF
! if { (eval echo configure:2621: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
***************
*** 2635,2641 ****
  else
    echo "$ac_t""no" 1>&6
  echo $ac_n "checking for __pthread_create in -lpthread""... $ac_c" 1>&6
! echo "configure:2639: checking for __pthread_create in -lpthread" >&5
  ac_lib_var=`echo pthread'_'__pthread_create | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
--- 2643,2649 ----
  else
    echo "$ac_t""no" 1>&6
  echo $ac_n "checking for __pthread_create in -lpthread""... $ac_c" 1>&6
! echo "configure:2647: checking for __pthread_create in -lpthread" >&5
  ac_lib_var=`echo pthread'_'__pthread_create | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
***************
*** 2643,2649 ****
    ac_save_LIBS="$LIBS"
  LIBS="-lpthread  $LIBS"
  cat > conftest.$ac_ext <<EOF
! #line 2647 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
--- 2651,2657 ----
    ac_save_LIBS="$LIBS"
  LIBS="-lpthread  $LIBS"
  cat > conftest.$ac_ext <<EOF
! #line 2655 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
***************
*** 2654,2660 ****
  __pthread_create()
  ; return 0; }
  EOF
! if { (eval echo configure:2658: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
--- 2662,2668 ----
  __pthread_create()
  ; return 0; }
  EOF
! if { (eval echo configure:2666: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
***************
*** 2680,2686 ****
  else
    echo "$ac_t""no" 1>&6
  echo $ac_n "checking for __pthread_create_system in -lpthread""... $ac_c" 1>&6
! echo "configure:2684: checking for __pthread_create_system in -lpthread" >&5
  ac_lib_var=`echo pthread'_'__pthread_create_system | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
--- 2688,2694 ----
  else
    echo "$ac_t""no" 1>&6
  echo $ac_n "checking for __pthread_create_system in -lpthread""... $ac_c" 1>&6
! echo "configure:2692: checking for __pthread_create_system in -lpthread" >&5
  ac_lib_var=`echo pthread'_'__pthread_create_system | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
***************
*** 2688,2694 ****
    ac_save_LIBS="$LIBS"
  LIBS="-lpthread  $LIBS"
  cat > conftest.$ac_ext <<EOF
! #line 2692 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
--- 2696,2702 ----
    ac_save_LIBS="$LIBS"
  LIBS="-lpthread  $LIBS"
  cat > conftest.$ac_ext <<EOF
! #line 2700 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
***************
*** 2699,2705 ****
  __pthread_create_system()
  ; return 0; }
  EOF
! if { (eval echo configure:2703: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
--- 2707,2713 ----
  __pthread_create_system()
  ; return 0; }
  EOF
! if { (eval echo configure:2711: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
***************
*** 2725,2731 ****
  else
    echo "$ac_t""no" 1>&6
  echo $ac_n "checking for pthread_create in -lc_r""... $ac_c" 1>&6
! echo "configure:2729: checking for pthread_create in -lc_r" >&5
  ac_lib_var=`echo c_r'_'pthread_create | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
--- 2733,2739 ----
  else
    echo "$ac_t""no" 1>&6
  echo $ac_n "checking for pthread_create in -lc_r""... $ac_c" 1>&6
! echo "configure:2737: checking for pthread_create in -lc_r" >&5
  ac_lib_var=`echo c_r'_'pthread_create | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
***************
*** 2733,2739 ****
    ac_save_LIBS="$LIBS"
  LIBS="-lc_r  $LIBS"
  cat > conftest.$ac_ext <<EOF
! #line 2737 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
--- 2741,2747 ----
    ac_save_LIBS="$LIBS"
  LIBS="-lc_r  $LIBS"
  cat > conftest.$ac_ext <<EOF
! #line 2745 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
***************
*** 2744,2750 ****
  pthread_create()
  ; return 0; }
  EOF
! if { (eval echo configure:2748: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
--- 2752,2758 ----
  pthread_create()
  ; return 0; }
  EOF
! if { (eval echo configure:2756: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
***************
*** 2770,2776 ****
  else
    echo "$ac_t""no" 1>&6
  echo $ac_n "checking for pthread_create in -lc""... $ac_c" 1>&6
! echo "configure:2774: checking for pthread_create in -lc" >&5
  ac_lib_var=`echo c'_'pthread_create | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
--- 2778,2784 ----
  else
    echo "$ac_t""no" 1>&6
  echo $ac_n "checking for pthread_create in -lc""... $ac_c" 1>&6
! echo "configure:2782: checking for pthread_create in -lc" >&5
  ac_lib_var=`echo c'_'pthread_create | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
***************
*** 2778,2784 ****
    ac_save_LIBS="$LIBS"
  LIBS="-lc  $LIBS"
  cat > conftest.$ac_ext <<EOF
! #line 2782 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
--- 2786,2792 ----
    ac_save_LIBS="$LIBS"
  LIBS="-lc  $LIBS"
  cat > conftest.$ac_ext <<EOF
! #line 2790 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
***************
*** 2789,2795 ****
  pthread_create()
  ; return 0; }
  EOF
! if { (eval echo configure:2793: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
--- 2797,2803 ----
  pthread_create()
  ; return 0; }
  EOF
! if { (eval echo configure:2801: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
***************
*** 2835,2841 ****
  	# We'd like to use sigwait() too
  	#
  	echo $ac_n "checking for sigwait in -lc""... $ac_c" 1>&6
! echo "configure:2839: checking for sigwait in -lc" >&5
  ac_lib_var=`echo c'_'sigwait | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
--- 2843,2849 ----
  	# We'd like to use sigwait() too
  	#
  	echo $ac_n "checking for sigwait in -lc""... $ac_c" 1>&6
! echo "configure:2847: checking for sigwait in -lc" >&5
  ac_lib_var=`echo c'_'sigwait | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
***************
*** 2843,2849 ****
    ac_save_LIBS="$LIBS"
  LIBS="-lc  $LIBS"
  cat > conftest.$ac_ext <<EOF
! #line 2847 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
--- 2851,2857 ----
    ac_save_LIBS="$LIBS"
  LIBS="-lc  $LIBS"
  cat > conftest.$ac_ext <<EOF
! #line 2855 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
***************
*** 2854,2860 ****
  sigwait()
  ; return 0; }
  EOF
! if { (eval echo configure:2858: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
--- 2862,2868 ----
  sigwait()
  ; return 0; }
  EOF
! if { (eval echo configure:2866: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
***************
*** 2876,2882 ****
  else
    echo "$ac_t""no" 1>&6
  echo $ac_n "checking for sigwait in -lpthread""... $ac_c" 1>&6
! echo "configure:2880: checking for sigwait in -lpthread" >&5
  ac_lib_var=`echo pthread'_'sigwait | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
--- 2884,2890 ----
  else
    echo "$ac_t""no" 1>&6
  echo $ac_n "checking for sigwait in -lpthread""... $ac_c" 1>&6
! echo "configure:2888: checking for sigwait in -lpthread" >&5
  ac_lib_var=`echo pthread'_'sigwait | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
***************
*** 2884,2890 ****
    ac_save_LIBS="$LIBS"
  LIBS="-lpthread  $LIBS"
  cat > conftest.$ac_ext <<EOF
! #line 2888 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
--- 2892,2898 ----
    ac_save_LIBS="$LIBS"
  LIBS="-lpthread  $LIBS"
  cat > conftest.$ac_ext <<EOF
! #line 2896 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
***************
*** 2895,2901 ****
  sigwait()
  ; return 0; }
  EOF
! if { (eval echo configure:2899: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
--- 2903,2909 ----
  sigwait()
  ; return 0; }
  EOF
! if { (eval echo configure:2907: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
***************
*** 2917,2923 ****
  else
    echo "$ac_t""no" 1>&6
  echo $ac_n "checking for _Psigwait in -lpthread""... $ac_c" 1>&6
! echo "configure:2921: checking for _Psigwait in -lpthread" >&5
  ac_lib_var=`echo pthread'_'_Psigwait | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
--- 2925,2931 ----
  else
    echo "$ac_t""no" 1>&6
  echo $ac_n "checking for _Psigwait in -lpthread""... $ac_c" 1>&6
! echo "configure:2929: checking for _Psigwait in -lpthread" >&5
  ac_lib_var=`echo pthread'_'_Psigwait | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
***************
*** 2925,2931 ****
    ac_save_LIBS="$LIBS"
  LIBS="-lpthread  $LIBS"
  cat > conftest.$ac_ext <<EOF
! #line 2929 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
--- 2933,2939 ----
    ac_save_LIBS="$LIBS"
  LIBS="-lpthread  $LIBS"
  cat > conftest.$ac_ext <<EOF
! #line 2937 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
***************
*** 2936,2942 ****
  _Psigwait()
  ; return 0; }
  EOF
! if { (eval echo configure:2940: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
--- 2944,2950 ----
  _Psigwait()
  ; return 0; }
  EOF
! if { (eval echo configure:2948: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
***************
*** 2966,2977 ****
  
  
  	echo $ac_n "checking for pthread_attr_getstacksize""... $ac_c" 1>&6
! echo "configure:2970: checking for pthread_attr_getstacksize" >&5
  if eval "test \"`echo '$''{'ac_cv_func_pthread_attr_getstacksize'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 2975 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char pthread_attr_getstacksize(); below.  */
--- 2974,2985 ----
  
  
  	echo $ac_n "checking for pthread_attr_getstacksize""... $ac_c" 1>&6
! echo "configure:2978: checking for pthread_attr_getstacksize" >&5
  if eval "test \"`echo '$''{'ac_cv_func_pthread_attr_getstacksize'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 2983 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char pthread_attr_getstacksize(); below.  */
***************
*** 2994,3000 ****
  
  ; return 0; }
  EOF
! if { (eval echo configure:2998: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_pthread_attr_getstacksize=yes"
  else
--- 3002,3008 ----
  
  ; return 0; }
  EOF
! if { (eval echo configure:3006: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_pthread_attr_getstacksize=yes"
  else
***************
*** 3026,3032 ****
  		#
  		*-freebsd*)
  			echo $ac_n "checking for sigwait in -lc_r""... $ac_c" 1>&6
! echo "configure:3030: checking for sigwait in -lc_r" >&5
  ac_lib_var=`echo c_r'_'sigwait | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
--- 3034,3040 ----
  		#
  		*-freebsd*)
  			echo $ac_n "checking for sigwait in -lc_r""... $ac_c" 1>&6
! echo "configure:3038: checking for sigwait in -lc_r" >&5
  ac_lib_var=`echo c_r'_'sigwait | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
***************
*** 3034,3040 ****
    ac_save_LIBS="$LIBS"
  LIBS="-lc_r  $LIBS"
  cat > conftest.$ac_ext <<EOF
! #line 3038 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
--- 3042,3048 ----
    ac_save_LIBS="$LIBS"
  LIBS="-lc_r  $LIBS"
  cat > conftest.$ac_ext <<EOF
! #line 3046 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
***************
*** 3045,3051 ****
  sigwait()
  ; return 0; }
  EOF
! if { (eval echo configure:3049: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
--- 3053,3059 ----
  sigwait()
  ; return 0; }
  EOF
! if { (eval echo configure:3057: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
***************
*** 3100,3111 ****
  EOF
  
  			echo $ac_n "checking for pthread_setconcurrency""... $ac_c" 1>&6
! echo "configure:3104: checking for pthread_setconcurrency" >&5
  if eval "test \"`echo '$''{'ac_cv_func_pthread_setconcurrency'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 3109 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char pthread_setconcurrency(); below.  */
--- 3108,3119 ----
  EOF
  
  			echo $ac_n "checking for pthread_setconcurrency""... $ac_c" 1>&6
! echo "configure:3112: checking for pthread_setconcurrency" >&5
  if eval "test \"`echo '$''{'ac_cv_func_pthread_setconcurrency'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 3117 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char pthread_setconcurrency(); below.  */
***************
*** 3128,3134 ****
  
  ; return 0; }
  EOF
! if { (eval echo configure:3132: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_pthread_setconcurrency=yes"
  else
--- 3136,3142 ----
  
  ; return 0; }
  EOF
! if { (eval echo configure:3140: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_pthread_setconcurrency=yes"
  else
***************
*** 3166,3177 ****
  	# Look for sysconf to allow detection of the number of processors.
  	#
  	echo $ac_n "checking for sysconf""... $ac_c" 1>&6
! echo "configure:3170: checking for sysconf" >&5
  if eval "test \"`echo '$''{'ac_cv_func_sysconf'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 3175 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char sysconf(); below.  */
--- 3174,3185 ----
  	# Look for sysconf to allow detection of the number of processors.
  	#
  	echo $ac_n "checking for sysconf""... $ac_c" 1>&6
! echo "configure:3178: checking for sysconf" >&5
  if eval "test \"`echo '$''{'ac_cv_func_sysconf'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 3183 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char sysconf(); below.  */
***************
*** 3194,3200 ****
  
  ; return 0; }
  EOF
! if { (eval echo configure:3198: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_sysconf=yes"
  else
--- 3202,3208 ----
  
  ; return 0; }
  EOF
! if { (eval echo configure:3206: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_sysconf=yes"
  else
***************
*** 3275,3286 ****
  # be defined.
  #
  echo $ac_n "checking for flockfile""... $ac_c" 1>&6
! echo "configure:3279: checking for flockfile" >&5
  if eval "test \"`echo '$''{'ac_cv_func_flockfile'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 3284 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char flockfile(); below.  */
--- 3283,3294 ----
  # be defined.
  #
  echo $ac_n "checking for flockfile""... $ac_c" 1>&6
! echo "configure:3287: checking for flockfile" >&5
  if eval "test \"`echo '$''{'ac_cv_func_flockfile'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 3292 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char flockfile(); below.  */
***************
*** 3303,3309 ****
  
  ; return 0; }
  EOF
! if { (eval echo configure:3307: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_flockfile=yes"
  else
--- 3311,3317 ----
  
  ; return 0; }
  EOF
! if { (eval echo configure:3315: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_flockfile=yes"
  else
***************
*** 3326,3337 ****
  fi
  
  echo $ac_n "checking for getc_unlocked""... $ac_c" 1>&6
! echo "configure:3330: checking for getc_unlocked" >&5
  if eval "test \"`echo '$''{'ac_cv_func_getc_unlocked'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 3335 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char getc_unlocked(); below.  */
--- 3334,3345 ----
  fi
  
  echo $ac_n "checking for getc_unlocked""... $ac_c" 1>&6
! echo "configure:3338: checking for getc_unlocked" >&5
  if eval "test \"`echo '$''{'ac_cv_func_getc_unlocked'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 3343 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char getc_unlocked(); below.  */
***************
*** 3354,3360 ****
  
  ; return 0; }
  EOF
! if { (eval echo configure:3358: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_getc_unlocked=yes"
  else
--- 3362,3368 ----
  
  ; return 0; }
  EOF
! if { (eval echo configure:3366: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_getc_unlocked=yes"
  else
***************
*** 3381,3387 ****
  # Indicate what the final decision was regarding threads.
  #
  echo $ac_n "checking whether to build with threads""... $ac_c" 1>&6
! echo "configure:3385: checking whether to build with threads" >&5
  if $use_threads; then
  	echo "$ac_t""yes" 1>&6
  else
--- 3389,3395 ----
  # Indicate what the final decision was regarding threads.
  #
  echo $ac_n "checking whether to build with threads""... $ac_c" 1>&6
! echo "configure:3393: checking whether to build with threads" >&5
  if $use_threads; then
  	echo "$ac_t""yes" 1>&6
  else
***************
*** 3457,3468 ****
  # NLS
  #
  echo $ac_n "checking for catgets""... $ac_c" 1>&6
! echo "configure:3461: checking for catgets" >&5
  if eval "test \"`echo '$''{'ac_cv_func_catgets'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 3466 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char catgets(); below.  */
--- 3465,3476 ----
  # NLS
  #
  echo $ac_n "checking for catgets""... $ac_c" 1>&6
! echo "configure:3469: checking for catgets" >&5
  if eval "test \"`echo '$''{'ac_cv_func_catgets'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 3474 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char catgets(); below.  */
***************
*** 3485,3491 ****
  
  ; return 0; }
  EOF
! if { (eval echo configure:3489: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_catgets=yes"
  else
--- 3493,3499 ----
  
  ; return 0; }
  EOF
! if { (eval echo configure:3497: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_catgets=yes"
  else
***************
*** 3523,3529 ****
  		;;
  	*)
  		echo $ac_n "checking for socket in -lsocket""... $ac_c" 1>&6
! echo "configure:3527: checking for socket in -lsocket" >&5
  ac_lib_var=`echo socket'_'socket | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
--- 3531,3537 ----
  		;;
  	*)
  		echo $ac_n "checking for socket in -lsocket""... $ac_c" 1>&6
! echo "configure:3535: checking for socket in -lsocket" >&5
  ac_lib_var=`echo socket'_'socket | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
***************
*** 3531,3537 ****
    ac_save_LIBS="$LIBS"
  LIBS="-lsocket  $LIBS"
  cat > conftest.$ac_ext <<EOF
! #line 3535 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
--- 3539,3545 ----
    ac_save_LIBS="$LIBS"
  LIBS="-lsocket  $LIBS"
  cat > conftest.$ac_ext <<EOF
! #line 3543 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
***************
*** 3542,3548 ****
  socket()
  ; return 0; }
  EOF
! if { (eval echo configure:3546: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
--- 3550,3556 ----
  socket()
  ; return 0; }
  EOF
! if { (eval echo configure:3554: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
***************
*** 3570,3576 ****
  fi
  
  		echo $ac_n "checking for inet_ntoa in -lnsl""... $ac_c" 1>&6
! echo "configure:3574: checking for inet_ntoa in -lnsl" >&5
  ac_lib_var=`echo nsl'_'inet_ntoa | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
--- 3578,3584 ----
  fi
  
  		echo $ac_n "checking for inet_ntoa in -lnsl""... $ac_c" 1>&6
! echo "configure:3582: checking for inet_ntoa in -lnsl" >&5
  ac_lib_var=`echo nsl'_'inet_ntoa | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
***************
*** 3578,3584 ****
    ac_save_LIBS="$LIBS"
  LIBS="-lnsl  $LIBS"
  cat > conftest.$ac_ext <<EOF
! #line 3582 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
--- 3586,3592 ----
    ac_save_LIBS="$LIBS"
  LIBS="-lnsl  $LIBS"
  cat > conftest.$ac_ext <<EOF
! #line 3590 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
***************
*** 3589,3595 ****
  inet_ntoa()
  ; return 0; }
  EOF
! if { (eval echo configure:3593: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
--- 3597,3603 ----
  inet_ntoa()
  ; return 0; }
  EOF
! if { (eval echo configure:3601: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
***************
*** 3623,3629 ****
  # Purify support
  #
  echo $ac_n "checking whether to use purify""... $ac_c" 1>&6
! echo "configure:3627: checking whether to use purify" >&5
  # Check whether --with-purify or --without-purify was given.
  if test "${with_purify+set}" = set; then
    withval="$with_purify"
--- 3631,3637 ----
  # Purify support
  #
  echo $ac_n "checking whether to use purify""... $ac_c" 1>&6
! echo "configure:3635: checking whether to use purify" >&5
  # Check whether --with-purify or --without-purify was given.
  if test "${with_purify+set}" = set; then
    withval="$with_purify"
***************
*** 3640,3646 ****
  		# Extract the first word of "purify", so it can be a program name with args.
  set dummy purify; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:3644: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_purify_path'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 3648,3654 ----
  		# Extract the first word of "purify", so it can be a program name with args.
  set dummy purify; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:3652: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_purify_path'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 3717,3728 ****
  case $use_libtool in
  	yes)
  		echo $ac_n "checking for Cygwin environment""... $ac_c" 1>&6
! echo "configure:3721: checking for Cygwin environment" >&5
  if eval "test \"`echo '$''{'ac_cv_cygwin'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 3726 "configure"
  #include "confdefs.h"
  
  int main() {
--- 3725,3736 ----
  case $use_libtool in
  	yes)
  		echo $ac_n "checking for Cygwin environment""... $ac_c" 1>&6
! echo "configure:3729: checking for Cygwin environment" >&5
  if eval "test \"`echo '$''{'ac_cv_cygwin'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 3734 "configure"
  #include "confdefs.h"
  
  int main() {
***************
*** 3733,3739 ****
  return __CYGWIN__;
  ; return 0; }
  EOF
! if { (eval echo configure:3737: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_cygwin=yes
  else
--- 3741,3747 ----
  return __CYGWIN__;
  ; return 0; }
  EOF
! if { (eval echo configure:3745: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_cygwin=yes
  else
***************
*** 3750,3768 ****
  CYGWIN=
  test "$ac_cv_cygwin" = yes && CYGWIN=yes
  echo $ac_n "checking for mingw32 environment""... $ac_c" 1>&6
! echo "configure:3754: checking for mingw32 environment" >&5
  if eval "test \"`echo '$''{'ac_cv_mingw32'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 3759 "configure"
  #include "confdefs.h"
  
  int main() {
  return __MINGW32__;
  ; return 0; }
  EOF
! if { (eval echo configure:3766: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_mingw32=yes
  else
--- 3758,3776 ----
  CYGWIN=
  test "$ac_cv_cygwin" = yes && CYGWIN=yes
  echo $ac_n "checking for mingw32 environment""... $ac_c" 1>&6
! echo "configure:3762: checking for mingw32 environment" >&5
  if eval "test \"`echo '$''{'ac_cv_mingw32'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 3767 "configure"
  #include "confdefs.h"
  
  int main() {
  return __MINGW32__;
  ; return 0; }
  EOF
! if { (eval echo configure:3774: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    ac_cv_mingw32=yes
  else
***************
*** 3848,3854 ****
  fi
  
  echo $ac_n "checking build system type""... $ac_c" 1>&6
! echo "configure:3852: checking build system type" >&5
  
  build_alias=$build
  case "$build_alias" in
--- 3856,3862 ----
  fi
  
  echo $ac_n "checking build system type""... $ac_c" 1>&6
! echo "configure:3860: checking build system type" >&5
  
  build_alias=$build
  case "$build_alias" in
***************
*** 3877,3883 ****
  if test "$GCC" = yes; then
    # Check if gcc -print-prog-name=ld gives a path.
    echo $ac_n "checking for ld used by GCC""... $ac_c" 1>&6
! echo "configure:3881: checking for ld used by GCC" >&5
    case $host in
    *-*-mingw*)
      # gcc leaves a trailing carriage return which upsets mingw
--- 3885,3891 ----
  if test "$GCC" = yes; then
    # Check if gcc -print-prog-name=ld gives a path.
    echo $ac_n "checking for ld used by GCC""... $ac_c" 1>&6
! echo "configure:3889: checking for ld used by GCC" >&5
    case $host in
    *-*-mingw*)
      # gcc leaves a trailing carriage return which upsets mingw
***************
*** 3907,3916 ****
    esac
  elif test "$with_gnu_ld" = yes; then
    echo $ac_n "checking for GNU ld""... $ac_c" 1>&6
! echo "configure:3911: checking for GNU ld" >&5
  else
    echo $ac_n "checking for non-GNU ld""... $ac_c" 1>&6
! echo "configure:3914: checking for non-GNU ld" >&5
  fi
  if eval "test \"`echo '$''{'lt_cv_path_LD'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
--- 3915,3924 ----
    esac
  elif test "$with_gnu_ld" = yes; then
    echo $ac_n "checking for GNU ld""... $ac_c" 1>&6
! echo "configure:3919: checking for GNU ld" >&5
  else
    echo $ac_n "checking for non-GNU ld""... $ac_c" 1>&6
! echo "configure:3922: checking for non-GNU ld" >&5
  fi
  if eval "test \"`echo '$''{'lt_cv_path_LD'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
***************
*** 3945,3951 ****
  fi
  test -z "$LD" && { echo "configure: error: no acceptable ld found in \$PATH" 1>&2; exit 1; }
  echo $ac_n "checking if the linker ($LD) is GNU ld""... $ac_c" 1>&6
! echo "configure:3949: checking if the linker ($LD) is GNU ld" >&5
  if eval "test \"`echo '$''{'lt_cv_prog_gnu_ld'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 3953,3959 ----
  fi
  test -z "$LD" && { echo "configure: error: no acceptable ld found in \$PATH" 1>&2; exit 1; }
  echo $ac_n "checking if the linker ($LD) is GNU ld""... $ac_c" 1>&6
! echo "configure:3957: checking if the linker ($LD) is GNU ld" >&5
  if eval "test \"`echo '$''{'lt_cv_prog_gnu_ld'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 3962,3968 ****
  
  
  echo $ac_n "checking for $LD option to reload object files""... $ac_c" 1>&6
! echo "configure:3966: checking for $LD option to reload object files" >&5
  if eval "test \"`echo '$''{'lt_cv_ld_reload_flag'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 3970,3976 ----
  
  
  echo $ac_n "checking for $LD option to reload object files""... $ac_c" 1>&6
! echo "configure:3974: checking for $LD option to reload object files" >&5
  if eval "test \"`echo '$''{'lt_cv_ld_reload_flag'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 3974,3980 ****
  test -n "$reload_flag" && reload_flag=" $reload_flag"
  
  echo $ac_n "checking for BSD-compatible nm""... $ac_c" 1>&6
! echo "configure:3978: checking for BSD-compatible nm" >&5
  if eval "test \"`echo '$''{'lt_cv_path_NM'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 3982,3988 ----
  test -n "$reload_flag" && reload_flag=" $reload_flag"
  
  echo $ac_n "checking for BSD-compatible nm""... $ac_c" 1>&6
! echo "configure:3986: checking for BSD-compatible nm" >&5
  if eval "test \"`echo '$''{'lt_cv_path_NM'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 4012,4018 ****
  echo "$ac_t""$NM" 1>&6
  
  echo $ac_n "checking whether ln -s works""... $ac_c" 1>&6
! echo "configure:4016: checking whether ln -s works" >&5
  if eval "test \"`echo '$''{'ac_cv_prog_LN_S'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 4020,4026 ----
  echo "$ac_t""$NM" 1>&6
  
  echo $ac_n "checking whether ln -s works""... $ac_c" 1>&6
! echo "configure:4024: checking whether ln -s works" >&5
  if eval "test \"`echo '$''{'ac_cv_prog_LN_S'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 4033,4039 ****
  fi
  
  echo $ac_n "checking how to recognise dependant libraries""... $ac_c" 1>&6
! echo "configure:4037: checking how to recognise dependant libraries" >&5
  if eval "test \"`echo '$''{'lt_cv_deplibs_check_method'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 4041,4047 ----
  fi
  
  echo $ac_n "checking how to recognise dependant libraries""... $ac_c" 1>&6
! echo "configure:4045: checking how to recognise dependant libraries" >&5
  if eval "test \"`echo '$''{'lt_cv_deplibs_check_method'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 4206,4218 ****
  deplibs_check_method=$lt_cv_deplibs_check_method
  
  echo $ac_n "checking for object suffix""... $ac_c" 1>&6
! echo "configure:4210: checking for object suffix" >&5
  if eval "test \"`echo '$''{'ac_cv_objext'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    rm -f conftest*
  echo 'int i = 1;' > conftest.$ac_ext
! if { (eval echo configure:4216: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    for ac_file in conftest.*; do
      case $ac_file in
      *.c) ;;
--- 4214,4226 ----
  deplibs_check_method=$lt_cv_deplibs_check_method
  
  echo $ac_n "checking for object suffix""... $ac_c" 1>&6
! echo "configure:4218: checking for object suffix" >&5
  if eval "test \"`echo '$''{'ac_cv_objext'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    rm -f conftest*
  echo 'int i = 1;' > conftest.$ac_ext
! if { (eval echo configure:4224: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    for ac_file in conftest.*; do
      case $ac_file in
      *.c) ;;
***************
*** 4232,4238 ****
  
  
  echo $ac_n "checking for executable suffix""... $ac_c" 1>&6
! echo "configure:4236: checking for executable suffix" >&5
  if eval "test \"`echo '$''{'ac_cv_exeext'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 4240,4246 ----
  
  
  echo $ac_n "checking for executable suffix""... $ac_c" 1>&6
! echo "configure:4244: checking for executable suffix" >&5
  if eval "test \"`echo '$''{'ac_cv_exeext'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 4242,4251 ****
    rm -f conftest*
    echo 'int main () { return 0; }' > conftest.$ac_ext
    ac_cv_exeext=
!   if { (eval echo configure:4246: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
      for file in conftest.*; do
        case $file in
!       *.c | *.o | *.obj) ;;
        *) ac_cv_exeext=`echo $file | sed -e s/conftest//` ;;
        esac
      done
--- 4250,4259 ----
    rm -f conftest*
    echo 'int main () { return 0; }' > conftest.$ac_ext
    ac_cv_exeext=
!   if { (eval echo configure:4254: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
      for file in conftest.*; do
        case $file in
!       *.c | *.C | *.o | *.obj) ;;
        *) ac_cv_exeext=`echo $file | sed -e s/conftest//` ;;
        esac
      done
***************
*** 4273,4279 ****
  
  # Check for command to grab the raw symbol name followed by C symbol from nm.
  echo $ac_n "checking command to parse $NM output""... $ac_c" 1>&6
! echo "configure:4277: checking command to parse $NM output" >&5
  if eval "test \"`echo '$''{'lt_cv_sys_global_symbol_pipe'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 4281,4287 ----
  
  # Check for command to grab the raw symbol name followed by C symbol from nm.
  echo $ac_n "checking command to parse $NM output""... $ac_c" 1>&6
! echo "configure:4285: checking command to parse $NM output" >&5
  if eval "test \"`echo '$''{'lt_cv_sys_global_symbol_pipe'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 4349,4358 ****
  int main(){nm_test_var='a';nm_test_func();return(0);}
  EOF
  
!   if { (eval echo configure:4353: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
      # Now try to grab the symbols.
      nlist=conftest.nm
!     if { (eval echo configure:4356: \"$NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist\") 1>&5; (eval $NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist) 2>&5; } && test -s "$nlist"; then
        # Try sorting and uniquifying the output.
        if sort "$nlist" | uniq > "$nlist"T; then
  	mv -f "$nlist"T "$nlist"
--- 4357,4366 ----
  int main(){nm_test_var='a';nm_test_func();return(0);}
  EOF
  
!   if { (eval echo configure:4361: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
      # Now try to grab the symbols.
      nlist=conftest.nm
!     if { (eval echo configure:4364: \"$NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist\") 1>&5; (eval $NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist) 2>&5; } && test -s "$nlist"; then
        # Try sorting and uniquifying the output.
        if sort "$nlist" | uniq > "$nlist"T; then
  	mv -f "$nlist"T "$nlist"
***************
*** 4403,4409 ****
  	  save_CFLAGS="$CFLAGS"
  	  LIBS="conftstm.$ac_objext"
  	  CFLAGS="$CFLAGS$no_builtin_flag"
! 	  if { (eval echo configure:4407: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  	    pipe_works=yes
  	  fi
  	  LIBS="$save_LIBS"
--- 4411,4417 ----
  	  save_CFLAGS="$CFLAGS"
  	  LIBS="conftstm.$ac_objext"
  	  CFLAGS="$CFLAGS$no_builtin_flag"
! 	  if { (eval echo configure:4415: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
  	    pipe_works=yes
  	  fi
  	  LIBS="$save_LIBS"
***************
*** 4449,4465 ****
  do
  ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
! echo "configure:4453: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 4458 "configure"
  #include "confdefs.h"
  #include <$ac_hdr>
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
! { (eval echo configure:4463: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    rm -rf conftest*
--- 4457,4473 ----
  do
  ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
! echo "configure:4461: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 4466 "configure"
  #include "confdefs.h"
  #include <$ac_hdr>
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
! { (eval echo configure:4471: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    rm -rf conftest*
***************
*** 4494,4500 ****
  file_magic*)
    if test "$file_magic_cmd" = '$MAGIC_CMD'; then
      echo $ac_n "checking for ${ac_tool_prefix}file""... $ac_c" 1>&6
! echo "configure:4498: checking for ${ac_tool_prefix}file" >&5
  if eval "test \"`echo '$''{'lt_cv_path_MAGIC_CMD'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 4502,4508 ----
  file_magic*)
    if test "$file_magic_cmd" = '$MAGIC_CMD'; then
      echo $ac_n "checking for ${ac_tool_prefix}file""... $ac_c" 1>&6
! echo "configure:4506: checking for ${ac_tool_prefix}file" >&5
  if eval "test \"`echo '$''{'lt_cv_path_MAGIC_CMD'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 4556,4562 ****
  if test -z "$lt_cv_path_MAGIC_CMD"; then
    if test -n "$ac_tool_prefix"; then
      echo $ac_n "checking for file""... $ac_c" 1>&6
! echo "configure:4560: checking for file" >&5
  if eval "test \"`echo '$''{'lt_cv_path_MAGIC_CMD'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 4564,4570 ----
  if test -z "$lt_cv_path_MAGIC_CMD"; then
    if test -n "$ac_tool_prefix"; then
      echo $ac_n "checking for file""... $ac_c" 1>&6
! echo "configure:4568: checking for file" >&5
  if eval "test \"`echo '$''{'lt_cv_path_MAGIC_CMD'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 4627,4633 ****
  # Extract the first word of "${ac_tool_prefix}ranlib", so it can be a program name with args.
  set dummy ${ac_tool_prefix}ranlib; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:4631: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 4635,4641 ----
  # Extract the first word of "${ac_tool_prefix}ranlib", so it can be a program name with args.
  set dummy ${ac_tool_prefix}ranlib; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:4639: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 4659,4665 ****
    # Extract the first word of "ranlib", so it can be a program name with args.
  set dummy ranlib; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:4663: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 4667,4673 ----
    # Extract the first word of "ranlib", so it can be a program name with args.
  set dummy ranlib; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:4671: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 4694,4700 ****
  # Extract the first word of "${ac_tool_prefix}strip", so it can be a program name with args.
  set dummy ${ac_tool_prefix}strip; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:4698: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_prog_STRIP'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 4702,4708 ----
  # Extract the first word of "${ac_tool_prefix}strip", so it can be a program name with args.
  set dummy ${ac_tool_prefix}strip; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:4706: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_prog_STRIP'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 4726,4732 ****
    # Extract the first word of "strip", so it can be a program name with args.
  set dummy strip; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:4730: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_prog_STRIP'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 4734,4740 ----
    # Extract the first word of "strip", so it can be a program name with args.
  set dummy strip; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:4738: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_prog_STRIP'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 4775,4782 ****
  case $host in
  *-*-irix6*)
    # Find out which ABI we are using.
!   echo '#line 4779 "configure"' > conftest.$ac_ext
!   if { (eval echo configure:4780: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
      case `/usr/bin/file conftest.$ac_objext` in
      *32-bit*)
        LD="${LD-ld} -32"
--- 4783,4790 ----
  case $host in
  *-*-irix6*)
    # Find out which ABI we are using.
!   echo '#line 4787 "configure"' > conftest.$ac_ext
!   if { (eval echo configure:4788: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
      case `/usr/bin/file conftest.$ac_objext` in
      *32-bit*)
        LD="${LD-ld} -32"
***************
*** 4797,4803 ****
    SAVE_CFLAGS="$CFLAGS"
    CFLAGS="$CFLAGS -belf"
    echo $ac_n "checking whether the C compiler needs -belf""... $ac_c" 1>&6
! echo "configure:4801: checking whether the C compiler needs -belf" >&5
  if eval "test \"`echo '$''{'lt_cv_cc_needs_belf'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 4805,4811 ----
    SAVE_CFLAGS="$CFLAGS"
    CFLAGS="$CFLAGS -belf"
    echo $ac_n "checking whether the C compiler needs -belf""... $ac_c" 1>&6
! echo "configure:4809: checking whether the C compiler needs -belf" >&5
  if eval "test \"`echo '$''{'lt_cv_cc_needs_belf'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 4810,4823 ****
  cross_compiling=$ac_cv_prog_cc_cross
  
       cat > conftest.$ac_ext <<EOF
! #line 4814 "configure"
  #include "confdefs.h"
  
  int main() {
  
  ; return 0; }
  EOF
! if { (eval echo configure:4821: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    lt_cv_cc_needs_belf=yes
  else
--- 4818,4831 ----
  cross_compiling=$ac_cv_prog_cc_cross
  
       cat > conftest.$ac_ext <<EOF
! #line 4822 "configure"
  #include "confdefs.h"
  
  int main() {
  
  ; return 0; }
  EOF
! if { (eval echo configure:4829: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    lt_cv_cc_needs_belf=yes
  else
***************
*** 4932,4938 ****
  ## FIXME: this should be a separate macro
  ##
  echo $ac_n "checking for objdir""... $ac_c" 1>&6
! echo "configure:4936: checking for objdir" >&5
  rm -f .libs 2>/dev/null
  mkdir .libs 2>/dev/null
  if test -d .libs; then
--- 4940,4946 ----
  ## FIXME: this should be a separate macro
  ##
  echo $ac_n "checking for objdir""... $ac_c" 1>&6
! echo "configure:4944: checking for objdir" >&5
  rm -f .libs 2>/dev/null
  mkdir .libs 2>/dev/null
  if test -d .libs; then
***************
*** 4963,4969 ****
  # in isolation, and that seeing it set (from the cache) indicates that
  # the associated values are set (in the cache) correctly too.
  echo $ac_n "checking for $compiler option to produce PIC""... $ac_c" 1>&6
! echo "configure:4967: checking for $compiler option to produce PIC" >&5
  if eval "test \"`echo '$''{'lt_cv_prog_cc_pic'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 4971,4977 ----
  # in isolation, and that seeing it set (from the cache) indicates that
  # the associated values are set (in the cache) correctly too.
  echo $ac_n "checking for $compiler option to produce PIC""... $ac_c" 1>&6
! echo "configure:4975: checking for $compiler option to produce PIC" >&5
  if eval "test \"`echo '$''{'lt_cv_prog_cc_pic'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 5115,5135 ****
  
    # Check to make sure the pic_flag actually works.
    echo $ac_n "checking if $compiler PIC flag $lt_cv_prog_cc_pic works""... $ac_c" 1>&6
! echo "configure:5119: checking if $compiler PIC flag $lt_cv_prog_cc_pic works" >&5
    if eval "test \"`echo '$''{'lt_cv_prog_cc_pic_works'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
        save_CFLAGS="$CFLAGS"
      CFLAGS="$CFLAGS $lt_cv_prog_cc_pic -DPIC"
      cat > conftest.$ac_ext <<EOF
! #line 5126 "configure"
  #include "confdefs.h"
  
  int main() {
  
  ; return 0; }
  EOF
! if { (eval echo configure:5133: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
          case $host_os in
        hpux9* | hpux10* | hpux11*)
--- 5123,5143 ----
  
    # Check to make sure the pic_flag actually works.
    echo $ac_n "checking if $compiler PIC flag $lt_cv_prog_cc_pic works""... $ac_c" 1>&6
! echo "configure:5127: checking if $compiler PIC flag $lt_cv_prog_cc_pic works" >&5
    if eval "test \"`echo '$''{'lt_cv_prog_cc_pic_works'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
        save_CFLAGS="$CFLAGS"
      CFLAGS="$CFLAGS $lt_cv_prog_cc_pic -DPIC"
      cat > conftest.$ac_ext <<EOF
! #line 5134 "configure"
  #include "confdefs.h"
  
  int main() {
  
  ; return 0; }
  EOF
! if { (eval echo configure:5141: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
          case $host_os in
        hpux9* | hpux10* | hpux11*)
***************
*** 5185,5191 ****
  ## FIXME: this should be a separate macro
  ##
  echo $ac_n "checking if $compiler static flag $lt_cv_prog_cc_static works""... $ac_c" 1>&6
! echo "configure:5189: checking if $compiler static flag $lt_cv_prog_cc_static works" >&5
  if eval "test \"`echo '$''{'lt_cv_prog_cc_static_works'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 5193,5199 ----
  ## FIXME: this should be a separate macro
  ##
  echo $ac_n "checking if $compiler static flag $lt_cv_prog_cc_static works""... $ac_c" 1>&6
! echo "configure:5197: checking if $compiler static flag $lt_cv_prog_cc_static works" >&5
  if eval "test \"`echo '$''{'lt_cv_prog_cc_static_works'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 5193,5206 ****
    save_LDFLAGS="$LDFLAGS"
    LDFLAGS="$LDFLAGS $lt_cv_prog_cc_static"
    cat > conftest.$ac_ext <<EOF
! #line 5197 "configure"
  #include "confdefs.h"
  
  int main() {
  
  ; return 0; }
  EOF
! if { (eval echo configure:5204: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    lt_cv_prog_cc_static_works=yes
  else
--- 5201,5214 ----
    save_LDFLAGS="$LDFLAGS"
    LDFLAGS="$LDFLAGS $lt_cv_prog_cc_static"
    cat > conftest.$ac_ext <<EOF
! #line 5205 "configure"
  #include "confdefs.h"
  
  int main() {
  
  ; return 0; }
  EOF
! if { (eval echo configure:5212: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    lt_cv_prog_cc_static_works=yes
  else
***************
*** 5231,5237 ****
  ##
  # Check to see if options -o and -c are simultaneously supported by compiler
  echo $ac_n "checking if $compiler supports -c -o file.$ac_objext""... $ac_c" 1>&6
! echo "configure:5235: checking if $compiler supports -c -o file.$ac_objext" >&5
  if eval "test \"`echo '$''{'lt_cv_compiler_c_o'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 5239,5245 ----
  ##
  # Check to see if options -o and -c are simultaneously supported by compiler
  echo $ac_n "checking if $compiler supports -c -o file.$ac_objext""... $ac_c" 1>&6
! echo "configure:5243: checking if $compiler supports -c -o file.$ac_objext" >&5
  if eval "test \"`echo '$''{'lt_cv_compiler_c_o'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 5250,5256 ****
  save_CFLAGS="$CFLAGS"
  CFLAGS="$CFLAGS -o out/conftest2.$ac_objext"
  compiler_c_o=no
! if { (eval echo configure:5254: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>out/conftest.err; } && test -s out/conftest2.$ac_objext; then
    # The compiler can only warn and ignore the option if not recognized
    # So say no if there are warnings
    if test -s out/conftest.err; then
--- 5258,5264 ----
  save_CFLAGS="$CFLAGS"
  CFLAGS="$CFLAGS -o out/conftest2.$ac_objext"
  compiler_c_o=no
! if { (eval echo configure:5262: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>out/conftest.err; } && test -s out/conftest2.$ac_objext; then
    # The compiler can only warn and ignore the option if not recognized
    # So say no if there are warnings
    if test -s out/conftest.err; then
***************
*** 5279,5285 ****
  if test x"$compiler_c_o" = x"yes"; then
    # Check to see if we can write to a .lo
    echo $ac_n "checking if $compiler supports -c -o file.lo""... $ac_c" 1>&6
! echo "configure:5283: checking if $compiler supports -c -o file.lo" >&5
    if eval "test \"`echo '$''{'lt_cv_compiler_o_lo'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 5287,5293 ----
  if test x"$compiler_c_o" = x"yes"; then
    # Check to see if we can write to a .lo
    echo $ac_n "checking if $compiler supports -c -o file.lo""... $ac_c" 1>&6
! echo "configure:5291: checking if $compiler supports -c -o file.lo" >&5
    if eval "test \"`echo '$''{'lt_cv_compiler_o_lo'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 5288,5301 ****
    save_CFLAGS="$CFLAGS"
    CFLAGS="$CFLAGS -c -o conftest.lo"
    cat > conftest.$ac_ext <<EOF
! #line 5292 "configure"
  #include "confdefs.h"
  
  int main() {
  int some_variable = 0;
  ; return 0; }
  EOF
! if { (eval echo configure:5299: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
        # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
--- 5296,5309 ----
    save_CFLAGS="$CFLAGS"
    CFLAGS="$CFLAGS -c -o conftest.lo"
    cat > conftest.$ac_ext <<EOF
! #line 5300 "configure"
  #include "confdefs.h"
  
  int main() {
  int some_variable = 0;
  ; return 0; }
  EOF
! if { (eval echo configure:5307: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
        # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
***************
*** 5329,5335 ****
  if test "$compiler_c_o" = no && test "$need_locks" != no; then
    # do not overwrite the value of need_locks provided by the user
    echo $ac_n "checking if we can lock with hard links""... $ac_c" 1>&6
! echo "configure:5333: checking if we can lock with hard links" >&5
    hard_links=yes
    $rm conftest*
    ln conftest.a conftest.b 2>/dev/null && hard_links=no
--- 5337,5343 ----
  if test "$compiler_c_o" = no && test "$need_locks" != no; then
    # do not overwrite the value of need_locks provided by the user
    echo $ac_n "checking if we can lock with hard links""... $ac_c" 1>&6
! echo "configure:5341: checking if we can lock with hard links" >&5
    hard_links=yes
    $rm conftest*
    ln conftest.a conftest.b 2>/dev/null && hard_links=no
***************
*** 5352,5371 ****
  if test "$GCC" = yes; then
    # Check to see if options -fno-rtti -fno-exceptions are supported by compiler
    echo $ac_n "checking if $compiler supports -fno-rtti -fno-exceptions""... $ac_c" 1>&6
! echo "configure:5356: checking if $compiler supports -fno-rtti -fno-exceptions" >&5
    echo "int some_variable = 0;" > conftest.$ac_ext
    save_CFLAGS="$CFLAGS"
    CFLAGS="$CFLAGS -fno-rtti -fno-exceptions -c conftest.$ac_ext"
    compiler_rtti_exceptions=no
    cat > conftest.$ac_ext <<EOF
! #line 5362 "configure"
  #include "confdefs.h"
  
  int main() {
  int some_variable = 0;
  ; return 0; }
  EOF
! if { (eval echo configure:5369: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
        # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
--- 5360,5379 ----
  if test "$GCC" = yes; then
    # Check to see if options -fno-rtti -fno-exceptions are supported by compiler
    echo $ac_n "checking if $compiler supports -fno-rtti -fno-exceptions""... $ac_c" 1>&6
! echo "configure:5364: checking if $compiler supports -fno-rtti -fno-exceptions" >&5
    echo "int some_variable = 0;" > conftest.$ac_ext
    save_CFLAGS="$CFLAGS"
    CFLAGS="$CFLAGS -fno-rtti -fno-exceptions -c conftest.$ac_ext"
    compiler_rtti_exceptions=no
    cat > conftest.$ac_ext <<EOF
! #line 5370 "configure"
  #include "confdefs.h"
  
  int main() {
  int some_variable = 0;
  ; return 0; }
  EOF
! if { (eval echo configure:5377: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
        # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
***************
*** 5396,5402 ****
  ##
  # See if the linker supports building shared libraries.
  echo $ac_n "checking whether the linker ($LD) supports shared libraries""... $ac_c" 1>&6
! echo "configure:5400: checking whether the linker ($LD) supports shared libraries" >&5
  
  allow_undefined_flag=
  no_undefined_flag=
--- 5404,5410 ----
  ##
  # See if the linker supports building shared libraries.
  echo $ac_n "checking whether the linker ($LD) supports shared libraries""... $ac_c" 1>&6
! echo "configure:5408: checking whether the linker ($LD) supports shared libraries" >&5
  
  allow_undefined_flag=
  no_undefined_flag=
***************
*** 6016,6022 ****
  ##
  # Check hardcoding attributes.
  echo $ac_n "checking how to hardcode library paths into programs""... $ac_c" 1>&6
! echo "configure:6020: checking how to hardcode library paths into programs" >&5
  hardcode_action=
  if test -n "$hardcode_libdir_flag_spec" || \
     test -n "$runpath_var"; then
--- 6024,6030 ----
  ##
  # Check hardcoding attributes.
  echo $ac_n "checking how to hardcode library paths into programs""... $ac_c" 1>&6
! echo "configure:6028: checking how to hardcode library paths into programs" >&5
  hardcode_action=
  if test -n "$hardcode_libdir_flag_spec" || \
     test -n "$runpath_var"; then
***************
*** 6048,6054 ****
  striplib=
  old_striplib=
  echo $ac_n "checking whether stripping libraries is possible""... $ac_c" 1>&6
! echo "configure:6052: checking whether stripping libraries is possible" >&5
  if test -n "$STRIP" && $STRIP -V 2>&1 | grep "GNU strip" >/dev/null; then
    test -z "$old_striplib" && old_striplib="$STRIP --strip-debug"
    test -z "$striplib" && striplib="$STRIP --strip-unneeded"
--- 6056,6062 ----
  striplib=
  old_striplib=
  echo $ac_n "checking whether stripping libraries is possible""... $ac_c" 1>&6
! echo "configure:6060: checking whether stripping libraries is possible" >&5
  if test -n "$STRIP" && $STRIP -V 2>&1 | grep "GNU strip" >/dev/null; then
    test -z "$old_striplib" && old_striplib="$STRIP --strip-debug"
    test -z "$striplib" && striplib="$STRIP --strip-unneeded"
***************
*** 6066,6072 ****
  ##
  # PORTME Fill in your ld.so characteristics
  echo $ac_n "checking dynamic linker characteristics""... $ac_c" 1>&6
! echo "configure:6070: checking dynamic linker characteristics" >&5
  library_names_spec=
  libname_spec='lib$name'
  soname_spec=
--- 6074,6080 ----
  ##
  # PORTME Fill in your ld.so characteristics
  echo $ac_n "checking dynamic linker characteristics""... $ac_c" 1>&6
! echo "configure:6078: checking dynamic linker characteristics" >&5
  library_names_spec=
  libname_spec='lib$name'
  soname_spec=
***************
*** 6456,6462 ****
  ##
  # Report the final consequences.
  echo $ac_n "checking if libtool supports shared libraries""... $ac_c" 1>&6
! echo "configure:6460: checking if libtool supports shared libraries" >&5
  echo "$ac_t""$can_build_shared" 1>&6
  ##
  ## END FIXME
--- 6464,6470 ----
  ##
  # Report the final consequences.
  echo $ac_n "checking if libtool supports shared libraries""... $ac_c" 1>&6
! echo "configure:6468: checking if libtool supports shared libraries" >&5
  echo "$ac_t""$can_build_shared" 1>&6
  ##
  ## END FIXME
***************
*** 6497,6503 ****
  
    *)
      echo $ac_n "checking for dlopen in -ldl""... $ac_c" 1>&6
! echo "configure:6501: checking for dlopen in -ldl" >&5
  ac_lib_var=`echo dl'_'dlopen | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
--- 6505,6511 ----
  
    *)
      echo $ac_n "checking for dlopen in -ldl""... $ac_c" 1>&6
! echo "configure:6509: checking for dlopen in -ldl" >&5
  ac_lib_var=`echo dl'_'dlopen | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
***************
*** 6505,6511 ****
    ac_save_LIBS="$LIBS"
  LIBS="-ldl  $LIBS"
  cat > conftest.$ac_ext <<EOF
! #line 6509 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
--- 6513,6519 ----
    ac_save_LIBS="$LIBS"
  LIBS="-ldl  $LIBS"
  cat > conftest.$ac_ext <<EOF
! #line 6517 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
***************
*** 6516,6522 ****
  dlopen()
  ; return 0; }
  EOF
! if { (eval echo configure:6520: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
--- 6524,6530 ----
  dlopen()
  ; return 0; }
  EOF
! if { (eval echo configure:6528: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
***************
*** 6535,6546 ****
  else
    echo "$ac_t""no" 1>&6
  echo $ac_n "checking for dlopen""... $ac_c" 1>&6
! echo "configure:6539: checking for dlopen" >&5
  if eval "test \"`echo '$''{'ac_cv_func_dlopen'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 6544 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char dlopen(); below.  */
--- 6543,6554 ----
  else
    echo "$ac_t""no" 1>&6
  echo $ac_n "checking for dlopen""... $ac_c" 1>&6
! echo "configure:6547: checking for dlopen" >&5
  if eval "test \"`echo '$''{'ac_cv_func_dlopen'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 6552 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char dlopen(); below.  */
***************
*** 6563,6569 ****
  
  ; return 0; }
  EOF
! if { (eval echo configure:6567: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_dlopen=yes"
  else
--- 6571,6577 ----
  
  ; return 0; }
  EOF
! if { (eval echo configure:6575: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_dlopen=yes"
  else
***************
*** 6581,6592 ****
  else
    echo "$ac_t""no" 1>&6
  echo $ac_n "checking for shl_load""... $ac_c" 1>&6
! echo "configure:6585: checking for shl_load" >&5
  if eval "test \"`echo '$''{'ac_cv_func_shl_load'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 6590 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char shl_load(); below.  */
--- 6589,6600 ----
  else
    echo "$ac_t""no" 1>&6
  echo $ac_n "checking for shl_load""... $ac_c" 1>&6
! echo "configure:6593: checking for shl_load" >&5
  if eval "test \"`echo '$''{'ac_cv_func_shl_load'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 6598 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char shl_load(); below.  */
***************
*** 6609,6615 ****
  
  ; return 0; }
  EOF
! if { (eval echo configure:6613: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_shl_load=yes"
  else
--- 6617,6623 ----
  
  ; return 0; }
  EOF
! if { (eval echo configure:6621: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_shl_load=yes"
  else
***************
*** 6627,6633 ****
  else
    echo "$ac_t""no" 1>&6
  echo $ac_n "checking for dlopen in -lsvld""... $ac_c" 1>&6
! echo "configure:6631: checking for dlopen in -lsvld" >&5
  ac_lib_var=`echo svld'_'dlopen | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
--- 6635,6641 ----
  else
    echo "$ac_t""no" 1>&6
  echo $ac_n "checking for dlopen in -lsvld""... $ac_c" 1>&6
! echo "configure:6639: checking for dlopen in -lsvld" >&5
  ac_lib_var=`echo svld'_'dlopen | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
***************
*** 6635,6641 ****
    ac_save_LIBS="$LIBS"
  LIBS="-lsvld  $LIBS"
  cat > conftest.$ac_ext <<EOF
! #line 6639 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
--- 6643,6649 ----
    ac_save_LIBS="$LIBS"
  LIBS="-lsvld  $LIBS"
  cat > conftest.$ac_ext <<EOF
! #line 6647 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
***************
*** 6646,6652 ****
  dlopen()
  ; return 0; }
  EOF
! if { (eval echo configure:6650: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
--- 6654,6660 ----
  dlopen()
  ; return 0; }
  EOF
! if { (eval echo configure:6658: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
***************
*** 6665,6671 ****
  else
    echo "$ac_t""no" 1>&6
  echo $ac_n "checking for shl_load in -ldld""... $ac_c" 1>&6
! echo "configure:6669: checking for shl_load in -ldld" >&5
  ac_lib_var=`echo dld'_'shl_load | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
--- 6673,6679 ----
  else
    echo "$ac_t""no" 1>&6
  echo $ac_n "checking for shl_load in -ldld""... $ac_c" 1>&6
! echo "configure:6677: checking for shl_load in -ldld" >&5
  ac_lib_var=`echo dld'_'shl_load | sed 'y%./+-%__p_%'`
  if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
***************
*** 6673,6679 ****
    ac_save_LIBS="$LIBS"
  LIBS="-ldld  $LIBS"
  cat > conftest.$ac_ext <<EOF
! #line 6677 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
--- 6681,6687 ----
    ac_save_LIBS="$LIBS"
  LIBS="-ldld  $LIBS"
  cat > conftest.$ac_ext <<EOF
! #line 6685 "configure"
  #include "confdefs.h"
  /* Override any gcc2 internal prototype to avoid an error.  */
  /* We use char because int might match the return type of a gcc2
***************
*** 6684,6690 ****
  shl_load()
  ; return 0; }
  EOF
! if { (eval echo configure:6688: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
--- 6692,6698 ----
  shl_load()
  ; return 0; }
  EOF
! if { (eval echo configure:6696: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_lib_$ac_lib_var=yes"
  else
***************
*** 6737,6743 ****
      LIBS="$lt_cv_dlopen_libs $LIBS"
  
      echo $ac_n "checking whether a program can dlopen itself""... $ac_c" 1>&6
! echo "configure:6741: checking whether a program can dlopen itself" >&5
  if eval "test \"`echo '$''{'lt_cv_dlopen_self'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 6745,6751 ----
      LIBS="$lt_cv_dlopen_libs $LIBS"
  
      echo $ac_n "checking whether a program can dlopen itself""... $ac_c" 1>&6
! echo "configure:6749: checking whether a program can dlopen itself" >&5
  if eval "test \"`echo '$''{'lt_cv_dlopen_self'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 6747,6753 ****
      lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
    lt_status=$lt_dlunknown
    cat > conftest.$ac_ext <<EOF
! #line 6751 "configure"
  #include "confdefs.h"
  
  #if HAVE_DLFCN_H
--- 6755,6761 ----
      lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
    lt_status=$lt_dlunknown
    cat > conftest.$ac_ext <<EOF
! #line 6759 "configure"
  #include "confdefs.h"
  
  #if HAVE_DLFCN_H
***************
*** 6808,6814 ****
      exit (status);
  }
  EOF
!   if { (eval echo configure:6812: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} 2>/dev/null; then
      (./conftest; exit; ) 2>/dev/null
      lt_status=$?
      case x$lt_status in
--- 6816,6822 ----
      exit (status);
  }
  EOF
!   if { (eval echo configure:6820: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} 2>/dev/null; then
      (./conftest; exit; ) 2>/dev/null
      lt_status=$?
      case x$lt_status in
***************
*** 6831,6837 ****
      if test "x$lt_cv_dlopen_self" = xyes; then
        LDFLAGS="$LDFLAGS $link_static_flag"
        echo $ac_n "checking whether a statically linked program can dlopen itself""... $ac_c" 1>&6
! echo "configure:6835: checking whether a statically linked program can dlopen itself" >&5
  if eval "test \"`echo '$''{'lt_cv_dlopen_self_static'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 6839,6845 ----
      if test "x$lt_cv_dlopen_self" = xyes; then
        LDFLAGS="$LDFLAGS $link_static_flag"
        echo $ac_n "checking whether a statically linked program can dlopen itself""... $ac_c" 1>&6
! echo "configure:6843: checking whether a statically linked program can dlopen itself" >&5
  if eval "test \"`echo '$''{'lt_cv_dlopen_self_static'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 6841,6847 ****
      lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
    lt_status=$lt_dlunknown
    cat > conftest.$ac_ext <<EOF
! #line 6845 "configure"
  #include "confdefs.h"
  
  #if HAVE_DLFCN_H
--- 6849,6855 ----
      lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
    lt_status=$lt_dlunknown
    cat > conftest.$ac_ext <<EOF
! #line 6853 "configure"
  #include "confdefs.h"
  
  #if HAVE_DLFCN_H
***************
*** 6902,6908 ****
      exit (status);
  }
  EOF
!   if { (eval echo configure:6906: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} 2>/dev/null; then
      (./conftest; exit; ) 2>/dev/null
      lt_status=$?
      case x$lt_status in
--- 6910,6916 ----
      exit (status);
  }
  EOF
!   if { (eval echo configure:6914: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} 2>/dev/null; then
      (./conftest; exit; ) 2>/dev/null
      lt_status=$?
      case x$lt_status in
***************
*** 6953,6966 ****
      # systems, -lgcc has to come before -lc. If gcc already passes -lc
      # to ld, don't add -lc before -lgcc.
      echo $ac_n "checking whether -lc should be explicitly linked in""... $ac_c" 1>&6
! echo "configure:6957: checking whether -lc should be explicitly linked in" >&5
      if eval "test \"`echo '$''{'lt_cv_archive_cmds_need_lc'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    $rm conftest*
      echo 'static int dummy;' > conftest.$ac_ext
  
!     if { (eval echo configure:6964: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
        soname=conftest
        lib=conftest
        libobjs=conftest.$ac_objext
--- 6961,6974 ----
      # systems, -lgcc has to come before -lc. If gcc already passes -lc
      # to ld, don't add -lc before -lgcc.
      echo $ac_n "checking whether -lc should be explicitly linked in""... $ac_c" 1>&6
! echo "configure:6965: checking whether -lc should be explicitly linked in" >&5
      if eval "test \"`echo '$''{'lt_cv_archive_cmds_need_lc'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    $rm conftest*
      echo 'static int dummy;' > conftest.$ac_ext
  
!     if { (eval echo configure:6972: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
        soname=conftest
        lib=conftest
        libobjs=conftest.$ac_objext
***************
*** 6973,6979 ****
        libname=conftest
        save_allow_undefined_flag=$allow_undefined_flag
        allow_undefined_flag=
!       if { (eval echo configure:6977: \"$archive_cmds 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1\") 1>&5; (eval $archive_cmds 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1) 2>&5; }
        then
  	lt_cv_archive_cmds_need_lc=no
        else
--- 6981,6987 ----
        libname=conftest
        save_allow_undefined_flag=$allow_undefined_flag
        allow_undefined_flag=
!       if { (eval echo configure:6985: \"$archive_cmds 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1\") 1>&5; (eval $archive_cmds 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1) 2>&5; }
        then
  	lt_cv_archive_cmds_need_lc=no
        else
***************
*** 7630,7638 ****
  # the right suffix on the files.
  #
  echo $ac_n "checking for IPv6 structures""... $ac_c" 1>&6
! echo "configure:7634: checking for IPv6 structures" >&5
  cat > conftest.$ac_ext <<EOF
! #line 7636 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
--- 7638,7646 ----
  # the right suffix on the files.
  #
  echo $ac_n "checking for IPv6 structures""... $ac_c" 1>&6
! echo "configure:7642: checking for IPv6 structures" >&5
  cat > conftest.$ac_ext <<EOF
! #line 7644 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
***************
*** 7642,7648 ****
  struct sockaddr_in6 sin6; return (0);
  ; return 0; }
  EOF
! if { (eval echo configure:7646: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  	 found_ipv6=yes
--- 7650,7656 ----
  struct sockaddr_in6 sin6; return (0);
  ; return 0; }
  EOF
! if { (eval echo configure:7654: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  	 found_ipv6=yes
***************
*** 7660,7666 ****
  # This is done before other IPv6 linking tests to LIBS is properly set.
  #
  echo $ac_n "checking for Kame IPv6 support""... $ac_c" 1>&6
! echo "configure:7664: checking for Kame IPv6 support" >&5
  # Check whether --with-kame or --without-kame was given.
  if test "${with_kame+set}" = set; then
    withval="$with_kame"
--- 7668,7674 ----
  # This is done before other IPv6 linking tests to LIBS is properly set.
  #
  echo $ac_n "checking for Kame IPv6 support""... $ac_c" 1>&6
! echo "configure:7672: checking for Kame IPv6 support" >&5
  # Check whether --with-kame or --without-kame was given.
  if test "${with_kame+set}" = set; then
    withval="$with_kame"
***************
*** 7751,7759 ****
  		LWRES_PLATFORM_HAVEIPV6="#define LWRES_PLATFORM_HAVEIPV6 1"
  
  		echo $ac_n "checking for in6_addr""... $ac_c" 1>&6
! echo "configure:7755: checking for in6_addr" >&5
  		cat > conftest.$ac_ext <<EOF
! #line 7757 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
--- 7759,7767 ----
  		LWRES_PLATFORM_HAVEIPV6="#define LWRES_PLATFORM_HAVEIPV6 1"
  
  		echo $ac_n "checking for in6_addr""... $ac_c" 1>&6
! echo "configure:7763: checking for in6_addr" >&5
  		cat > conftest.$ac_ext <<EOF
! #line 7765 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
***************
*** 7766,7772 ****
  struct in6_addr in6; return (0);
  ; return 0; }
  EOF
! if { (eval echo configure:7770: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  		 ISC_PLATFORM_HAVEINADDR6="#undef ISC_PLATFORM_HAVEINADDR6"
--- 7774,7780 ----
  struct in6_addr in6; return (0);
  ; return 0; }
  EOF
! if { (eval echo configure:7778: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  		 ISC_PLATFORM_HAVEINADDR6="#undef ISC_PLATFORM_HAVEINADDR6"
***************
*** 7784,7792 ****
  rm -f conftest*
  
  		echo $ac_n "checking for in6addr_any""... $ac_c" 1>&6
! echo "configure:7788: checking for in6addr_any" >&5
  		cat > conftest.$ac_ext <<EOF
! #line 7790 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
--- 7792,7800 ----
  rm -f conftest*
  
  		echo $ac_n "checking for in6addr_any""... $ac_c" 1>&6
! echo "configure:7796: checking for in6addr_any" >&5
  		cat > conftest.$ac_ext <<EOF
! #line 7798 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
***************
*** 7800,7806 ****
  struct in6_addr in6; in6 = in6addr_any; return (in6.s6_addr[0]);
  ; return 0; }
  EOF
! if { (eval echo configure:7804: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  			 ISC_PLATFORM_NEEDIN6ADDRANY="#undef ISC_PLATFORM_NEEDIN6ADDRANY"
--- 7808,7814 ----
  struct in6_addr in6; in6 = in6addr_any; return (in6.s6_addr[0]);
  ; return 0; }
  EOF
! if { (eval echo configure:7812: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  			 ISC_PLATFORM_NEEDIN6ADDRANY="#undef ISC_PLATFORM_NEEDIN6ADDRANY"
***************
*** 7816,7824 ****
  rm -f conftest*
  
  		echo $ac_n "checking for in6addr_loopback""... $ac_c" 1>&6
! echo "configure:7820: checking for in6addr_loopback" >&5
  		cat > conftest.$ac_ext <<EOF
! #line 7822 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
--- 7824,7832 ----
  rm -f conftest*
  
  		echo $ac_n "checking for in6addr_loopback""... $ac_c" 1>&6
! echo "configure:7828: checking for in6addr_loopback" >&5
  		cat > conftest.$ac_ext <<EOF
! #line 7830 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
***************
*** 7832,7838 ****
  struct in6_addr in6; in6 = in6addr_loopback; return (in6.s6_addr[0]);
  ; return 0; }
  EOF
! if { (eval echo configure:7836: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  			 ISC_PLATFORM_NEEDIN6ADDRLOOPBACK="#undef ISC_PLATFORM_NEEDIN6ADDRLOOPBACK"
--- 7840,7846 ----
  struct in6_addr in6; in6 = in6addr_loopback; return (in6.s6_addr[0]);
  ; return 0; }
  EOF
! if { (eval echo configure:7844: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  			 ISC_PLATFORM_NEEDIN6ADDRLOOPBACK="#undef ISC_PLATFORM_NEEDIN6ADDRLOOPBACK"
***************
*** 7848,7856 ****
  rm -f conftest*
  
  		echo $ac_n "checking for sin6_scope_id in struct sockaddr_in6""... $ac_c" 1>&6
! echo "configure:7852: checking for sin6_scope_id in struct sockaddr_in6" >&5
  		cat > conftest.$ac_ext <<EOF
! #line 7854 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
--- 7856,7864 ----
  rm -f conftest*
  
  		echo $ac_n "checking for sin6_scope_id in struct sockaddr_in6""... $ac_c" 1>&6
! echo "configure:7860: checking for sin6_scope_id in struct sockaddr_in6" >&5
  		cat > conftest.$ac_ext <<EOF
! #line 7862 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
***************
*** 7863,7869 ****
  struct sockaddr_in6 xyzzy; xyzzy.sin6_scope_id = 0; return (0);
  ; return 0; }
  EOF
! if { (eval echo configure:7867: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  			 result="#define LWRES_HAVE_SIN6_SCOPE_ID 1"
--- 7871,7877 ----
  struct sockaddr_in6 xyzzy; xyzzy.sin6_scope_id = 0; return (0);
  ; return 0; }
  EOF
! if { (eval echo configure:7875: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  			 result="#define LWRES_HAVE_SIN6_SCOPE_ID 1"
***************
*** 7878,7886 ****
  		LWRES_HAVE_SIN6_SCOPE_ID="$result"
  
  		echo $ac_n "checking for in6_pktinfo""... $ac_c" 1>&6
! echo "configure:7882: checking for in6_pktinfo" >&5
  		cat > conftest.$ac_ext <<EOF
! #line 7884 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
--- 7886,7894 ----
  		LWRES_HAVE_SIN6_SCOPE_ID="$result"
  
  		echo $ac_n "checking for in6_pktinfo""... $ac_c" 1>&6
! echo "configure:7890: checking for in6_pktinfo" >&5
  		cat > conftest.$ac_ext <<EOF
! #line 7892 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
***************
*** 7893,7899 ****
  struct in6_pktinfo xyzzy; return (0);
  ; return 0; }
  EOF
! if { (eval echo configure:7897: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  			 ISC_PLATFORM_HAVEIN6PKTINFO="#define ISC_PLATFORM_HAVEIN6PKTINFO 1"
--- 7901,7907 ----
  struct in6_pktinfo xyzzy; return (0);
  ; return 0; }
  EOF
! if { (eval echo configure:7905: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  			 ISC_PLATFORM_HAVEIN6PKTINFO="#define ISC_PLATFORM_HAVEIN6PKTINFO 1"
***************
*** 7948,7956 ****
  #
  
  echo $ac_n "checking for inet_ntop""... $ac_c" 1>&6
! echo "configure:7952: checking for inet_ntop" >&5
  cat > conftest.$ac_ext <<EOF
! #line 7954 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
--- 7956,7964 ----
  #
  
  echo $ac_n "checking for inet_ntop""... $ac_c" 1>&6
! echo "configure:7960: checking for inet_ntop" >&5
  cat > conftest.$ac_ext <<EOF
! #line 7962 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
***************
*** 7960,7966 ****
  inet_ntop(0, 0, 0, 0); return (0);
  ; return 0; }
  EOF
! if { (eval echo configure:7964: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
          ISC_PLATFORM_NEEDNTOP="#undef ISC_PLATFORM_NEEDNTOP"
--- 7968,7974 ----
  inet_ntop(0, 0, 0, 0); return (0);
  ; return 0; }
  EOF
! if { (eval echo configure:7972: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
          ISC_PLATFORM_NEEDNTOP="#undef ISC_PLATFORM_NEEDNTOP"
***************
*** 7981,7993 ****
  # zeros should also be rejected.
  
  echo $ac_n "checking for inet_pton""... $ac_c" 1>&6
! echo "configure:7985: checking for inet_pton" >&5
  if test "$cross_compiling" = yes; then
    echo "$ac_t""assuming target platform has working inet_pton" 1>&6
  	ISC_PLATFORM_NEEDPTON="#undef ISC_PLATFORM_NEEDPTON"
  else
    cat > conftest.$ac_ext <<EOF
! #line 7991 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
--- 7989,8001 ----
  # zeros should also be rejected.
  
  echo $ac_n "checking for inet_pton""... $ac_c" 1>&6
! echo "configure:7993: checking for inet_pton" >&5
  if test "$cross_compiling" = yes; then
    echo "$ac_t""assuming target platform has working inet_pton" 1>&6
  	ISC_PLATFORM_NEEDPTON="#undef ISC_PLATFORM_NEEDPTON"
  else
    cat > conftest.$ac_ext <<EOF
! #line 7999 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
***************
*** 7997,8003 ****
  main() { char a[4]; return (inet_pton(AF_INET, "1.2.3", a) == 1 ? 1 :
  			    inet_pton(AF_INET, "1.2.3.04", a) == 1 ? 1 : 0); }
  EOF
! if { (eval echo configure:8001: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    echo "$ac_t""yes" 1>&6
          ISC_PLATFORM_NEEDPTON="#undef ISC_PLATFORM_NEEDPTON"
--- 8005,8011 ----
  main() { char a[4]; return (inet_pton(AF_INET, "1.2.3", a) == 1 ? 1 :
  			    inet_pton(AF_INET, "1.2.3.04", a) == 1 ? 1 : 0); }
  EOF
! if { (eval echo configure:8009: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    echo "$ac_t""yes" 1>&6
          ISC_PLATFORM_NEEDPTON="#undef ISC_PLATFORM_NEEDPTON"
***************
*** 8015,8023 ****
  
  
  echo $ac_n "checking for inet_aton""... $ac_c" 1>&6
! echo "configure:8019: checking for inet_aton" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8021 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
--- 8023,8031 ----
  
  
  echo $ac_n "checking for inet_aton""... $ac_c" 1>&6
! echo "configure:8027: checking for inet_aton" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8029 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
***************
*** 8027,8033 ****
  struct in_addr in; inet_aton(0, &in); return (0);
  ; return 0; }
  EOF
! if { (eval echo configure:8031: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
          ISC_PLATFORM_NEEDATON="#undef ISC_PLATFORM_NEEDATON"
--- 8035,8041 ----
  struct in_addr in; inet_aton(0, &in); return (0);
  ; return 0; }
  EOF
! if { (eval echo configure:8039: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
          ISC_PLATFORM_NEEDATON="#undef ISC_PLATFORM_NEEDATON"
***************
*** 8060,8068 ****
  esac
  
  echo $ac_n "checking for sa_len in struct sockaddr""... $ac_c" 1>&6
! echo "configure:8064: checking for sa_len in struct sockaddr" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8066 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
--- 8068,8076 ----
  esac
  
  echo $ac_n "checking for sa_len in struct sockaddr""... $ac_c" 1>&6
! echo "configure:8072: checking for sa_len in struct sockaddr" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8074 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
***************
*** 8071,8077 ****
  struct sockaddr sa; sa.sa_len = 0; return (0);
  ; return 0; }
  EOF
! if { (eval echo configure:8075: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  	ISC_PLATFORM_HAVESALEN="#define ISC_PLATFORM_HAVESALEN 1"
--- 8079,8085 ----
  struct sockaddr sa; sa.sa_len = 0; return (0);
  ; return 0; }
  EOF
! if { (eval echo configure:8083: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  	ISC_PLATFORM_HAVESALEN="#define ISC_PLATFORM_HAVESALEN 1"
***************
*** 8092,8100 ****
  # Look for a 4.4BSD or 4.3BSD struct msghdr
  #
  echo $ac_n "checking for struct msghdr flavor""... $ac_c" 1>&6
! echo "configure:8096: checking for struct msghdr flavor" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8098 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
--- 8100,8108 ----
  # Look for a 4.4BSD or 4.3BSD struct msghdr
  #
  echo $ac_n "checking for struct msghdr flavor""... $ac_c" 1>&6
! echo "configure:8104: checking for struct msghdr flavor" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8106 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
***************
*** 8103,8109 ****
  struct msghdr msg; msg.msg_flags = 0; return (0);
  ; return 0; }
  EOF
! if { (eval echo configure:8107: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""4.4BSD" 1>&6
  	ISC_PLATFORM_MSGHDRFLAVOR="#define ISC_NET_BSD44MSGHDR 1"
--- 8111,8117 ----
  struct msghdr msg; msg.msg_flags = 0; return (0);
  ; return 0; }
  EOF
! if { (eval echo configure:8115: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""4.4BSD" 1>&6
  	ISC_PLATFORM_MSGHDRFLAVOR="#define ISC_NET_BSD44MSGHDR 1"
***************
*** 8121,8129 ****
  # Look for in_port_t.
  #
  echo $ac_n "checking for type in_port_t""... $ac_c" 1>&6
! echo "configure:8125: checking for type in_port_t" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8127 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
--- 8129,8137 ----
  # Look for in_port_t.
  #
  echo $ac_n "checking for type in_port_t""... $ac_c" 1>&6
! echo "configure:8133: checking for type in_port_t" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8135 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
***************
*** 8132,8138 ****
  in_port_t port = 25; return (0);
  ; return 0; }
  EOF
! if { (eval echo configure:8136: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  	ISC_PLATFORM_NEEDPORTT="#undef ISC_PLATFORM_NEEDPORTT"
--- 8140,8146 ----
  in_port_t port = 25; return (0);
  ; return 0; }
  EOF
! if { (eval echo configure:8144: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  	ISC_PLATFORM_NEEDPORTT="#undef ISC_PLATFORM_NEEDPORTT"
***************
*** 8150,8158 ****
  # Check for addrinfo
  #
  echo $ac_n "checking for struct addrinfo""... $ac_c" 1>&6
! echo "configure:8154: checking for struct addrinfo" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8156 "configure"
  #include "confdefs.h"
  
  #include <netdb.h>
--- 8158,8166 ----
  # Check for addrinfo
  #
  echo $ac_n "checking for struct addrinfo""... $ac_c" 1>&6
! echo "configure:8162: checking for struct addrinfo" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8164 "configure"
  #include "confdefs.h"
  
  #include <netdb.h>
***************
*** 8160,8166 ****
  struct addrinfo a; return (0);
  ; return 0; }
  EOF
! if { (eval echo configure:8164: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  	ISC_LWRES_NEEDADDRINFO="#undef ISC_LWRES_NEEDADDRINFO"
--- 8168,8174 ----
  struct addrinfo a; return (0);
  ; return 0; }
  EOF
! if { (eval echo configure:8172: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  	ISC_LWRES_NEEDADDRINFO="#undef ISC_LWRES_NEEDADDRINFO"
***************
*** 8182,8190 ****
  # Check for rrsetinfo
  #
  echo $ac_n "checking for struct rrsetinfo""... $ac_c" 1>&6
! echo "configure:8186: checking for struct rrsetinfo" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8188 "configure"
  #include "confdefs.h"
  
  #include <netdb.h>
--- 8190,8198 ----
  # Check for rrsetinfo
  #
  echo $ac_n "checking for struct rrsetinfo""... $ac_c" 1>&6
! echo "configure:8194: checking for struct rrsetinfo" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8196 "configure"
  #include "confdefs.h"
  
  #include <netdb.h>
***************
*** 8192,8198 ****
  struct rrsetinfo r; return (0);
  ; return 0; }
  EOF
! if { (eval echo configure:8196: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  	ISC_LWRES_NEEDRRSETINFO="#undef ISC_LWRES_NEEDRRSETINFO"
--- 8200,8206 ----
  struct rrsetinfo r; return (0);
  ; return 0; }
  EOF
! if { (eval echo configure:8204: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  	ISC_LWRES_NEEDRRSETINFO="#undef ISC_LWRES_NEEDRRSETINFO"
***************
*** 8207,8215 ****
  
  
  echo $ac_n "checking for int sethostent""... $ac_c" 1>&6
! echo "configure:8211: checking for int sethostent" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8213 "configure"
  #include "confdefs.h"
  
  #include <netdb.h>
--- 8215,8223 ----
  
  
  echo $ac_n "checking for int sethostent""... $ac_c" 1>&6
! echo "configure:8219: checking for int sethostent" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8221 "configure"
  #include "confdefs.h"
  
  #include <netdb.h>
***************
*** 8217,8223 ****
  int i = sethostent(0); return(0);
  ; return 0; }
  EOF
! if { (eval echo configure:8221: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  	ISC_LWRES_SETHOSTENTINT="#define ISC_LWRES_SETHOSTENTINT 1"
--- 8225,8231 ----
  int i = sethostent(0); return(0);
  ; return 0; }
  EOF
! if { (eval echo configure:8229: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  	ISC_LWRES_SETHOSTENTINT="#define ISC_LWRES_SETHOSTENTINT 1"
***************
*** 8232,8240 ****
  
  
  echo $ac_n "checking for int endhostent""... $ac_c" 1>&6
! echo "configure:8236: checking for int endhostent" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8238 "configure"
  #include "confdefs.h"
  
  #include <netdb.h>
--- 8240,8248 ----
  
  
  echo $ac_n "checking for int endhostent""... $ac_c" 1>&6
! echo "configure:8244: checking for int endhostent" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8246 "configure"
  #include "confdefs.h"
  
  #include <netdb.h>
***************
*** 8242,8248 ****
  int i = endhostent(); return(0);
  ; return 0; }
  EOF
! if { (eval echo configure:8246: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  	ISC_LWRES_ENDHOSTENTINT="#define ISC_LWRES_ENDHOSTENTINT 1"
--- 8250,8256 ----
  int i = endhostent(); return(0);
  ; return 0; }
  EOF
! if { (eval echo configure:8254: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  	ISC_LWRES_ENDHOSTENTINT="#define ISC_LWRES_ENDHOSTENTINT 1"
***************
*** 8257,8265 ****
  
  
  echo $ac_n "checking for getnetbyaddr(in_addr_t, ...)""... $ac_c" 1>&6
! echo "configure:8261: checking for getnetbyaddr(in_addr_t, ...)" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8263 "configure"
  #include "confdefs.h"
  
  #include <netdb.h>
--- 8265,8273 ----
  
  
  echo $ac_n "checking for getnetbyaddr(in_addr_t, ...)""... $ac_c" 1>&6
! echo "configure:8269: checking for getnetbyaddr(in_addr_t, ...)" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8271 "configure"
  #include "confdefs.h"
  
  #include <netdb.h>
***************
*** 8268,8274 ****
  
  ; return 0; }
  EOF
! if { (eval echo configure:8272: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  	ISC_LWRES_GETNETBYADDRINADDR="#define ISC_LWRES_GETNETBYADDRINADDR 1"
--- 8276,8282 ----
  
  ; return 0; }
  EOF
! if { (eval echo configure:8280: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  	ISC_LWRES_GETNETBYADDRINADDR="#define ISC_LWRES_GETNETBYADDRINADDR 1"
***************
*** 8283,8291 ****
  
  
  echo $ac_n "checking for int setnetent""... $ac_c" 1>&6
! echo "configure:8287: checking for int setnetent" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8289 "configure"
  #include "confdefs.h"
  
  #include <netdb.h>
--- 8291,8299 ----
  
  
  echo $ac_n "checking for int setnetent""... $ac_c" 1>&6
! echo "configure:8295: checking for int setnetent" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8297 "configure"
  #include "confdefs.h"
  
  #include <netdb.h>
***************
*** 8293,8299 ****
  int i = setnetent(0); return(0);
  ; return 0; }
  EOF
! if { (eval echo configure:8297: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  	ISC_LWRES_SETNETENTINT="#define ISC_LWRES_SETNETENTINT 1"
--- 8301,8307 ----
  int i = setnetent(0); return(0);
  ; return 0; }
  EOF
! if { (eval echo configure:8305: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  	ISC_LWRES_SETNETENTINT="#define ISC_LWRES_SETNETENTINT 1"
***************
*** 8308,8316 ****
  
  
  echo $ac_n "checking for int endnetent""... $ac_c" 1>&6
! echo "configure:8312: checking for int endnetent" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8314 "configure"
  #include "confdefs.h"
  
  #include <netdb.h>
--- 8316,8324 ----
  
  
  echo $ac_n "checking for int endnetent""... $ac_c" 1>&6
! echo "configure:8320: checking for int endnetent" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8322 "configure"
  #include "confdefs.h"
  
  #include <netdb.h>
***************
*** 8318,8324 ****
  int i = endnetent(); return(0);
  ; return 0; }
  EOF
! if { (eval echo configure:8322: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  	ISC_LWRES_ENDNETENTINT="#define ISC_LWRES_ENDNETENTINT 1"
--- 8326,8332 ----
  int i = endnetent(); return(0);
  ; return 0; }
  EOF
! if { (eval echo configure:8330: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  	ISC_LWRES_ENDNETENTINT="#define ISC_LWRES_ENDNETENTINT 1"
***************
*** 8333,8341 ****
  
  
  echo $ac_n "checking for gethostbyaddr(const void *, size_t, ...)""... $ac_c" 1>&6
! echo "configure:8337: checking for gethostbyaddr(const void *, size_t, ...)" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8339 "configure"
  #include "confdefs.h"
  
  #include <netdb.h>
--- 8341,8349 ----
  
  
  echo $ac_n "checking for gethostbyaddr(const void *, size_t, ...)""... $ac_c" 1>&6
! echo "configure:8345: checking for gethostbyaddr(const void *, size_t, ...)" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8347 "configure"
  #include "confdefs.h"
  
  #include <netdb.h>
***************
*** 8344,8350 ****
  return(0);
  ; return 0; }
  EOF
! if { (eval echo configure:8348: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  	ISC_LWRES_GETHOSTBYADDRVOID="#define ISC_LWRES_GETHOSTBYADDRVOID 1"
--- 8352,8358 ----
  return(0);
  ; return 0; }
  EOF
! if { (eval echo configure:8356: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  	ISC_LWRES_GETHOSTBYADDRVOID="#define ISC_LWRES_GETHOSTBYADDRVOID 1"
***************
*** 8359,8367 ****
  
  
  echo $ac_n "checking for h_errno in netdb.h""... $ac_c" 1>&6
! echo "configure:8363: checking for h_errno in netdb.h" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8365 "configure"
  #include "confdefs.h"
  
  #include <netdb.h>
--- 8367,8375 ----
  
  
  echo $ac_n "checking for h_errno in netdb.h""... $ac_c" 1>&6
! echo "configure:8371: checking for h_errno in netdb.h" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8373 "configure"
  #include "confdefs.h"
  
  #include <netdb.h>
***************
*** 8369,8375 ****
  h_errno = 1; return(0);
  ; return 0; }
  EOF
! if { (eval echo configure:8373: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  	ISC_LWRES_NEEDHERRNO="#undef ISC_LWRES_NEEDHERRNO"
--- 8377,8383 ----
  h_errno = 1; return(0);
  ; return 0; }
  EOF
! if { (eval echo configure:8381: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
  	ISC_LWRES_NEEDHERRNO="#undef ISC_LWRES_NEEDHERRNO"
***************
*** 8384,8395 ****
  
  
  echo $ac_n "checking for getipnodebyname""... $ac_c" 1>&6
! echo "configure:8388: checking for getipnodebyname" >&5
  if eval "test \"`echo '$''{'ac_cv_func_getipnodebyname'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 8393 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char getipnodebyname(); below.  */
--- 8392,8403 ----
  
  
  echo $ac_n "checking for getipnodebyname""... $ac_c" 1>&6
! echo "configure:8396: checking for getipnodebyname" >&5
  if eval "test \"`echo '$''{'ac_cv_func_getipnodebyname'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 8401 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char getipnodebyname(); below.  */
***************
*** 8412,8418 ****
  
  ; return 0; }
  EOF
! if { (eval echo configure:8416: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_getipnodebyname=yes"
  else
--- 8420,8426 ----
  
  ; return 0; }
  EOF
! if { (eval echo configure:8424: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_getipnodebyname=yes"
  else
***************
*** 8433,8444 ****
  fi
  
  echo $ac_n "checking for getnameinfo""... $ac_c" 1>&6
! echo "configure:8437: checking for getnameinfo" >&5
  if eval "test \"`echo '$''{'ac_cv_func_getnameinfo'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 8442 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char getnameinfo(); below.  */
--- 8441,8452 ----
  fi
  
  echo $ac_n "checking for getnameinfo""... $ac_c" 1>&6
! echo "configure:8445: checking for getnameinfo" >&5
  if eval "test \"`echo '$''{'ac_cv_func_getnameinfo'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 8450 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char getnameinfo(); below.  */
***************
*** 8461,8467 ****
  
  ; return 0; }
  EOF
! if { (eval echo configure:8465: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_getnameinfo=yes"
  else
--- 8469,8475 ----
  
  ; return 0; }
  EOF
! if { (eval echo configure:8473: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_getnameinfo=yes"
  else
***************
*** 8482,8493 ****
  fi
  
  echo $ac_n "checking for getaddrinfo""... $ac_c" 1>&6
! echo "configure:8486: checking for getaddrinfo" >&5
  if eval "test \"`echo '$''{'ac_cv_func_getaddrinfo'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 8491 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char getaddrinfo(); below.  */
--- 8490,8501 ----
  fi
  
  echo $ac_n "checking for getaddrinfo""... $ac_c" 1>&6
! echo "configure:8494: checking for getaddrinfo" >&5
  if eval "test \"`echo '$''{'ac_cv_func_getaddrinfo'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 8499 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char getaddrinfo(); below.  */
***************
*** 8510,8516 ****
  
  ; return 0; }
  EOF
! if { (eval echo configure:8514: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_getaddrinfo=yes"
  else
--- 8518,8524 ----
  
  ; return 0; }
  EOF
! if { (eval echo configure:8522: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_getaddrinfo=yes"
  else
***************
*** 8535,8546 ****
  fi
  
  echo $ac_n "checking for gai_strerror""... $ac_c" 1>&6
! echo "configure:8539: checking for gai_strerror" >&5
  if eval "test \"`echo '$''{'ac_cv_func_gai_strerror'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 8544 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char gai_strerror(); below.  */
--- 8543,8554 ----
  fi
  
  echo $ac_n "checking for gai_strerror""... $ac_c" 1>&6
! echo "configure:8547: checking for gai_strerror" >&5
  if eval "test \"`echo '$''{'ac_cv_func_gai_strerror'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 8552 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char gai_strerror(); below.  */
***************
*** 8563,8569 ****
  
  ; return 0; }
  EOF
! if { (eval echo configure:8567: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_gai_strerror=yes"
  else
--- 8571,8577 ----
  
  ; return 0; }
  EOF
! if { (eval echo configure:8575: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_gai_strerror=yes"
  else
***************
*** 8593,8601 ****
  # Look for a sysctl call to get the list of network interfaces.
  #
  echo $ac_n "checking for interface list sysctl""... $ac_c" 1>&6
! echo "configure:8597: checking for interface list sysctl" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8599 "configure"
  #include "confdefs.h"
  
  #include <sys/param.h>
--- 8601,8609 ----
  # Look for a sysctl call to get the list of network interfaces.
  #
  echo $ac_n "checking for interface list sysctl""... $ac_c" 1>&6
! echo "configure:8605: checking for interface list sysctl" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8607 "configure"
  #include "confdefs.h"
  
  #include <sys/param.h>
***************
*** 8632,8647 ****
  # AC_CHECK_FUNC() incorrectly succeeds because it declares
  # the function itself.
  echo $ac_n "checking for correctly declared strsep()""... $ac_c" 1>&6
! echo "configure:8636: checking for correctly declared strsep()" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8638 "configure"
  #include "confdefs.h"
  #include <string.h>
  int main() {
  char *sp; char *foo = strsep(&sp, ".");
  ; return 0; }
  EOF
! if { (eval echo configure:8645: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6; ISC_PLATFORM_NEEDSTRSEP="#undef ISC_PLATFORM_NEEDSTRSEP"
  else
--- 8640,8655 ----
  # AC_CHECK_FUNC() incorrectly succeeds because it declares
  # the function itself.
  echo $ac_n "checking for correctly declared strsep()""... $ac_c" 1>&6
! echo "configure:8644: checking for correctly declared strsep()" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8646 "configure"
  #include "confdefs.h"
  #include <string.h>
  int main() {
  char *sp; char *foo = strsep(&sp, ".");
  ; return 0; }
  EOF
! if { (eval echo configure:8653: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6; ISC_PLATFORM_NEEDSTRSEP="#undef ISC_PLATFORM_NEEDSTRSEP"
  else
***************
*** 8653,8664 ****
  rm -f conftest*
  
  echo $ac_n "checking for vsnprintf""... $ac_c" 1>&6
! echo "configure:8657: checking for vsnprintf" >&5
  if eval "test \"`echo '$''{'ac_cv_func_vsnprintf'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 8662 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char vsnprintf(); below.  */
--- 8661,8672 ----
  rm -f conftest*
  
  echo $ac_n "checking for vsnprintf""... $ac_c" 1>&6
! echo "configure:8665: checking for vsnprintf" >&5
  if eval "test \"`echo '$''{'ac_cv_func_vsnprintf'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 8670 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char vsnprintf(); below.  */
***************
*** 8681,8687 ****
  
  ; return 0; }
  EOF
! if { (eval echo configure:8685: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_vsnprintf=yes"
  else
--- 8689,8695 ----
  
  ; return 0; }
  EOF
! if { (eval echo configure:8693: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_vsnprintf=yes"
  else
***************
*** 8706,8717 ****
  
  
  echo $ac_n "checking for strerror""... $ac_c" 1>&6
! echo "configure:8710: checking for strerror" >&5
  if eval "test \"`echo '$''{'ac_cv_func_strerror'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 8715 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char strerror(); below.  */
--- 8714,8725 ----
  
  
  echo $ac_n "checking for strerror""... $ac_c" 1>&6
! echo "configure:8718: checking for strerror" >&5
  if eval "test \"`echo '$''{'ac_cv_func_strerror'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 8723 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char strerror(); below.  */
***************
*** 8734,8740 ****
  
  ; return 0; }
  EOF
! if { (eval echo configure:8738: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_strerror=yes"
  else
--- 8742,8748 ----
  
  ; return 0; }
  EOF
! if { (eval echo configure:8746: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_strerror=yes"
  else
***************
*** 8768,8784 ****
  # but that's defined elsewhere since we don't use configure on Win32.
  #
  echo $ac_n "checking printf format modifier for 64-bit integers""... $ac_c" 1>&6
! echo "configure:8772: checking printf format modifier for 64-bit integers" >&5
  if test "$cross_compiling" = yes; then
    echo "$ac_t""assuming target platform uses ll" 1>&6
  	ISC_PLATFORM_QUADFORMAT='#define ISC_PLATFORM_QUADFORMAT "ll"'
  else
    cat > conftest.$ac_ext <<EOF
! #line 8778 "configure"
  #include "confdefs.h"
  main() { exit(!(sizeof(long long int) == sizeof(long int))); }
  EOF
! if { (eval echo configure:8782: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    echo "$ac_t""l" 1>&6
  	ISC_PLATFORM_QUADFORMAT='#define ISC_PLATFORM_QUADFORMAT "l"'
--- 8776,8792 ----
  # but that's defined elsewhere since we don't use configure on Win32.
  #
  echo $ac_n "checking printf format modifier for 64-bit integers""... $ac_c" 1>&6
! echo "configure:8780: checking printf format modifier for 64-bit integers" >&5
  if test "$cross_compiling" = yes; then
    echo "$ac_t""assuming target platform uses ll" 1>&6
  	ISC_PLATFORM_QUADFORMAT='#define ISC_PLATFORM_QUADFORMAT "ll"'
  else
    cat > conftest.$ac_ext <<EOF
! #line 8786 "configure"
  #include "confdefs.h"
  main() { exit(!(sizeof(long long int) == sizeof(long int))); }
  EOF
! if { (eval echo configure:8790: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    echo "$ac_t""l" 1>&6
  	ISC_PLATFORM_QUADFORMAT='#define ISC_PLATFORM_QUADFORMAT "l"'
***************
*** 8798,8809 ****
  # Security Stuff
  #
  echo $ac_n "checking for chroot""... $ac_c" 1>&6
! echo "configure:8802: checking for chroot" >&5
  if eval "test \"`echo '$''{'ac_cv_func_chroot'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 8807 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char chroot(); below.  */
--- 8806,8817 ----
  # Security Stuff
  #
  echo $ac_n "checking for chroot""... $ac_c" 1>&6
! echo "configure:8810: checking for chroot" >&5
  if eval "test \"`echo '$''{'ac_cv_func_chroot'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 8815 "configure"
  #include "confdefs.h"
  /* System header to define __stub macros and hopefully few prototypes,
      which can conflict with char chroot(); below.  */
***************
*** 8826,8832 ****
  
  ; return 0; }
  EOF
! if { (eval echo configure:8830: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_chroot=yes"
  else
--- 8834,8840 ----
  
  ; return 0; }
  EOF
! if { (eval echo configure:8838: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
    rm -rf conftest*
    eval "ac_cv_func_chroot=yes"
  else
***************
*** 8860,8876 ****
  do
  ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
! echo "configure:8864: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 8869 "configure"
  #include "confdefs.h"
  #include <$ac_hdr>
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
! { (eval echo configure:8874: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    rm -rf conftest*
--- 8868,8884 ----
  do
  ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
! echo "configure:8872: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 8877 "configure"
  #include "confdefs.h"
  #include <$ac_hdr>
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
! { (eval echo configure:8882: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    rm -rf conftest*
***************
*** 8904,8920 ****
  do
  ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
! echo "configure:8908: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 8913 "configure"
  #include "confdefs.h"
  #include <$ac_hdr>
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
! { (eval echo configure:8918: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    rm -rf conftest*
--- 8912,8928 ----
  do
  ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
  echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
! echo "configure:8916: checking for $ac_hdr" >&5
  if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
    cat > conftest.$ac_ext <<EOF
! #line 8921 "configure"
  #include "confdefs.h"
  #include <$ac_hdr>
  EOF
  ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
! { (eval echo configure:8926: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
  ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
  if test -z "$ac_err"; then
    rm -rf conftest*
***************
*** 8945,8953 ****
  # BSD/OS, and perhaps some others, don't define rlim_t.
  #
  echo $ac_n "checking for type rlim_t""... $ac_c" 1>&6
! echo "configure:8949: checking for type rlim_t" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8951 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
--- 8953,8961 ----
  # BSD/OS, and perhaps some others, don't define rlim_t.
  #
  echo $ac_n "checking for type rlim_t""... $ac_c" 1>&6
! echo "configure:8957: checking for type rlim_t" >&5
  cat > conftest.$ac_ext <<EOF
! #line 8959 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
***************
*** 8957,8963 ****
  rlim_t rl = 19671212; return (0);
  ; return 0; }
  EOF
! if { (eval echo configure:8961: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
   ISC_PLATFORM_RLIMITTYPE="#define ISC_PLATFORM_RLIMITTYPE rlim_t"
--- 8965,8971 ----
  rlim_t rl = 19671212; return (0);
  ; return 0; }
  EOF
! if { (eval echo configure:8969: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    rm -rf conftest*
    echo "$ac_t""yes" 1>&6
   ISC_PLATFORM_RLIMITTYPE="#define ISC_PLATFORM_RLIMITTYPE rlim_t"
***************
*** 8968,8979 ****
    echo "$ac_t""no" 1>&6
  
  echo $ac_n "checking type of rlim_cur""... $ac_c" 1>&6
! echo "configure:8972: checking type of rlim_cur" >&5
  if test "$cross_compiling" = yes; then
    { echo "configure: error: cannot determine type of rlim_cur when cross compiling - define rlim_t" 1>&2; exit 1; }
  else
    cat > conftest.$ac_ext <<EOF
! #line 8977 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
--- 8976,8987 ----
    echo "$ac_t""no" 1>&6
  
  echo $ac_n "checking type of rlim_cur""... $ac_c" 1>&6
! echo "configure:8980: checking type of rlim_cur" >&5
  if test "$cross_compiling" = yes; then
    { echo "configure: error: cannot determine type of rlim_cur when cross compiling - define rlim_t" 1>&2; exit 1; }
  else
    cat > conftest.$ac_ext <<EOF
! #line 8985 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
***************
*** 8981,8987 ****
  #include <sys/resource.h>
  main() { struct rlimit r; exit(!(sizeof(r.rlim_cur) == sizeof(int)));}
  EOF
! if { (eval echo configure:8985: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    echo "$ac_t""int" 1>&6
  ISC_PLATFORM_RLIMITTYPE="#define ISC_PLATFORM_RLIMITTYPE int"
--- 8989,8995 ----
  #include <sys/resource.h>
  main() { struct rlimit r; exit(!(sizeof(r.rlim_cur) == sizeof(int)));}
  EOF
! if { (eval echo configure:8993: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    echo "$ac_t""int" 1>&6
  ISC_PLATFORM_RLIMITTYPE="#define ISC_PLATFORM_RLIMITTYPE int"
***************
*** 8994,9000 ****
    { echo "configure: error: this cannot happen" 1>&2; exit 1; }
  else
    cat > conftest.$ac_ext <<EOF
! #line 8998 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
--- 9002,9008 ----
    { echo "configure: error: this cannot happen" 1>&2; exit 1; }
  else
    cat > conftest.$ac_ext <<EOF
! #line 9006 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
***************
*** 9002,9008 ****
  #include <sys/resource.h>
  main() { struct rlimit r; exit(!(sizeof(r.rlim_cur) == sizeof(long int)));}
  EOF
! if { (eval echo configure:9006: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    echo "$ac_t""long int" 1>&6
  ISC_PLATFORM_RLIMITTYPE="#define ISC_PLATFORM_RLIMITTYPE long int"
--- 9010,9016 ----
  #include <sys/resource.h>
  main() { struct rlimit r; exit(!(sizeof(r.rlim_cur) == sizeof(long int)));}
  EOF
! if { (eval echo configure:9014: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    echo "$ac_t""long int" 1>&6
  ISC_PLATFORM_RLIMITTYPE="#define ISC_PLATFORM_RLIMITTYPE long int"
***************
*** 9015,9021 ****
    { echo "configure: error: this cannot happen" 1>&2; exit 1; }
  else
    cat > conftest.$ac_ext <<EOF
! #line 9019 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
--- 9023,9029 ----
    { echo "configure: error: this cannot happen" 1>&2; exit 1; }
  else
    cat > conftest.$ac_ext <<EOF
! #line 9027 "configure"
  #include "confdefs.h"
  
  #include <sys/types.h>
***************
*** 9023,9029 ****
  #include <sys/resource.h>
  main() { struct rlimit r; exit((!sizeof(r.rlim_cur) == sizeof(long long int)));}
  EOF
! if { (eval echo configure:9027: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    echo "$ac_t""long long int" 1>&6
  ISC_PLATFORM_RLIMITTYPE="#define ISC_PLATFORM_RLIMITTYPE long long int"
--- 9031,9037 ----
  #include <sys/resource.h>
  main() { struct rlimit r; exit((!sizeof(r.rlim_cur) == sizeof(long long int)));}
  EOF
! if { (eval echo configure:9035: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
  then
    echo "$ac_t""long long int" 1>&6
  ISC_PLATFORM_RLIMITTYPE="#define ISC_PLATFORM_RLIMITTYPE long long int"
***************
*** 9147,9153 ****
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:9151: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_OPENJADE'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 9155,9161 ----
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:9159: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_OPENJADE'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 9194,9200 ****
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:9198: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_JADETEX'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 9202,9208 ----
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:9206: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_JADETEX'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 9237,9243 ****
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:9241: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_PDFJADETEX'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
--- 9245,9251 ----
  # Extract the first word of "$ac_prog", so it can be a program name with args.
  set dummy $ac_prog; ac_word=$2
  echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
! echo "configure:9249: checking for $ac_word" >&5
  if eval "test \"`echo '$''{'ac_cv_path_PDFJADETEX'+set}'`\" = set"; then
    echo $ac_n "(cached) $ac_c" 1>&6
  else
***************
*** 9293,9299 ****
  
  SGMLCATALOG=""
  echo $ac_n "checking for catalog""... $ac_c" 1>&6
! echo "configure:9297: checking for catalog" >&5
  for d in $sgmltrees
  do
  	f=$d/catalog
--- 9301,9307 ----
  
  SGMLCATALOG=""
  echo $ac_n "checking for catalog""... $ac_c" 1>&6
! echo "configure:9305: checking for catalog" >&5
  for d in $sgmltrees
  do
  	f=$d/catalog
***************
*** 9335,9341 ****
  
  HTMLSTYLE=""
  echo $ac_n "checking for html/docbook.dsl""... $ac_c" 1>&6
! echo "configure:9339: checking for html/docbook.dsl" >&5
  for d in $stylepath
  do
  	f=$d/html/docbook.dsl
--- 9343,9349 ----
  
  HTMLSTYLE=""
  echo $ac_n "checking for html/docbook.dsl""... $ac_c" 1>&6
! echo "configure:9347: checking for html/docbook.dsl" >&5
  for d in $stylepath
  do
  	f=$d/html/docbook.dsl
***************
*** 9356,9362 ****
  
  PRINTSTYLE=""
  echo $ac_n "checking for print/docbook.dsl""... $ac_c" 1>&6
! echo "configure:9360: checking for print/docbook.dsl" >&5
  for d in $stylepath
  do
  	f=$d/print/docbook.dsl
--- 9364,9370 ----
  
  PRINTSTYLE=""
  echo $ac_n "checking for print/docbook.dsl""... $ac_c" 1>&6
! echo "configure:9368: checking for print/docbook.dsl" >&5
  for d in $stylepath
  do
  	f=$d/print/docbook.dsl
***************
*** 9382,9388 ****
  
  XMLDCL=""
  echo $ac_n "checking for docbook/dsssl/modular/dtds/decls/xml.dcl""... $ac_c" 1>&6
! echo "configure:9386: checking for docbook/dsssl/modular/dtds/decls/xml.dcl" >&5
  for d in $sgmltrees
  do
  	f=$d/docbook/dsssl/modular/dtds/decls/xml.dcl
--- 9390,9396 ----
  
  XMLDCL=""
  echo $ac_n "checking for docbook/dsssl/modular/dtds/decls/xml.dcl""... $ac_c" 1>&6
! echo "configure:9394: checking for docbook/dsssl/modular/dtds/decls/xml.dcl" >&5
  for d in $sgmltrees
  do
  	f=$d/docbook/dsssl/modular/dtds/decls/xml.dcl
***************
*** 9408,9414 ****
  
  DOCBOOK2MANSPEC=""
  echo $ac_n "checking for docbook2X/docbook2man-spec.pl""... $ac_c" 1>&6
! echo "configure:9412: checking for docbook2X/docbook2man-spec.pl" >&5
  for d in $sgmltrees
  do
  	f=$d/docbook2X/docbook2man-spec.pl
--- 9416,9422 ----
  
  DOCBOOK2MANSPEC=""
  echo $ac_n "checking for docbook2X/docbook2man-spec.pl""... $ac_c" 1>&6
! echo "configure:9420: checking for docbook2X/docbook2man-spec.pl" >&5
  for d in $sgmltrees
  do
  	f=$d/docbook2X/docbook2man-spec.pl
***************
*** 9428,9433 ****
--- 9436,9631 ----
  
  
  #
+ # IDN support
+ #
+ # Check whether --with-idn or --without-idn was given.
+ if test "${with_idn+set}" = set; then
+   withval="$with_idn"
+   use_idn="$withval"
+ else
+   use_idn="no"
+ fi
+ 
+ case "$use_idn" in
+ yes)
+ 	if test X$prefix = XNONE ; then
+ 		idn_path=/usr/local
+ 	else
+ 		idn_path=$prefix
+ 	fi
+ 	;;
+ no)
+ 	;;
+ *)
+ 	idn_path="$use_idn"
+ 	;;
+ esac
+ 
+ iconvinc=
+ iconvlib=
+ # Check whether --with-libiconv or --without-libiconv was given.
+ if test "${with_libiconv+set}" = set; then
+   withval="$with_libiconv"
+   use_libiconv="$withval"
+ else
+   use_libiconv="no"
+ fi
+ 
+ case "$use_libiconv" in
+ yes)
+ 	if test X$prefix = XNONE ; then
+ 		iconvlib="-L/usr/local/lib -R/usr/local/lib -liconv"
+ 	else
+ 		iconvlib="-L$prefix/lib -R$prefix/lib -liconv"
+ 	fi
+ 	;;
+ no)
+ 	iconvlib=
+ 	;;
+ *)
+ 	iconvlib="-L$use_libiconv/lib -R$use_libiconv/lib -liconv"
+ 	;;
+ esac
+ 
+ # Check whether --with-iconv or --without-iconv was given.
+ if test "${with_iconv+set}" = set; then
+   withval="$with_iconv"
+   iconvlib="$withval"
+ fi
+ 
+ case "$iconvlib" in
+ no)
+ 	iconvlib=
+ 	;;
+ yes)
+ 	iconvlib=-liconv
+ 	;;
+ esac
+ 
+ # Check whether --with-idnlib or --without-idnlib was given.
+ if test "${with_idnlib+set}" = set; then
+   withval="$with_idnlib"
+   idnlib="$withval"
+ else
+   idnlib="no"
+ fi
+ 
+ if test "$idnlib" = yes; then
+ 	{ echo "configure: error: You must specify ARG for --with-idnlib." 1>&2; exit 1; }
+ fi
+ 
+ IDNLIBS=
+ if test "$use_idn" != no; then
+ 	cat >> confdefs.h <<\EOF
+ #define WITH_IDN 1
+ EOF
+ 
+ 	STD_CINCLUDES="$STD_CINCLUDES -I$idn_path/include"
+ 	if test "$idnlib" != no; then
+ 		IDNLIBS="$idnlib $iconvlib"
+ 	else
+ 		IDNLIBS="-L$idn_path/lib -lidnkit $iconvlib"
+ 	fi
+ fi
+ 
+ 
+ for ac_hdr in locale.h
+ do
+ ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
+ echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
+ echo "configure:9537: checking for $ac_hdr" >&5
+ if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+   echo $ac_n "(cached) $ac_c" 1>&6
+ else
+   cat > conftest.$ac_ext <<EOF
+ #line 9542 "configure"
+ #include "confdefs.h"
+ #include <$ac_hdr>
+ EOF
+ ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+ { (eval echo configure:9547: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+ if test -z "$ac_err"; then
+   rm -rf conftest*
+   eval "ac_cv_header_$ac_safe=yes"
+ else
+   echo "$ac_err" >&5
+   echo "configure: failed program was:" >&5
+   cat conftest.$ac_ext >&5
+   rm -rf conftest*
+   eval "ac_cv_header_$ac_safe=no"
+ fi
+ rm -f conftest*
+ fi
+ if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+   echo "$ac_t""yes" 1>&6
+     ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
+   cat >> confdefs.h <<EOF
+ #define $ac_tr_hdr 1
+ EOF
+  
+ else
+   echo "$ac_t""no" 1>&6
+ fi
+ done
+ 
+ for ac_func in setlocale
+ do
+ echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
+ echo "configure:9576: checking for $ac_func" >&5
+ if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
+   echo $ac_n "(cached) $ac_c" 1>&6
+ else
+   cat > conftest.$ac_ext <<EOF
+ #line 9581 "configure"
+ #include "confdefs.h"
+ /* System header to define __stub macros and hopefully few prototypes,
+     which can conflict with char $ac_func(); below.  */
+ #include <assert.h>
+ /* Override any gcc2 internal prototype to avoid an error.  */
+ /* We use char because int might match the return type of a gcc2
+     builtin and then its argument prototype would still apply.  */
+ char $ac_func();
+ 
+ int main() {
+ 
+ /* The GNU C library defines this for functions which it implements
+     to always fail with ENOSYS.  Some functions are actually named
+     something starting with __ and the normal name is an alias.  */
+ #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+ choke me
+ #else
+ $ac_func();
+ #endif
+ 
+ ; return 0; }
+ EOF
+ if { (eval echo configure:9604: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+   rm -rf conftest*
+   eval "ac_cv_func_$ac_func=yes"
+ else
+   echo "configure: failed program was:" >&5
+   cat conftest.$ac_ext >&5
+   rm -rf conftest*
+   eval "ac_cv_func_$ac_func=no"
+ fi
+ rm -f conftest*
+ fi
+ 
+ if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+   echo "$ac_t""yes" 1>&6
+     ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
+   cat >> confdefs.h <<EOF
+ #define $ac_tr_func 1
+ EOF
+  
+ else
+   echo "$ac_t""no" 1>&6
+ fi
+ done
+ 
+ 
+ #
  # Substitutions
  #
  
***************
*** 9799,9804 ****
--- 9997,10003 ----
  s%@PRINTSTYLE@%$PRINTSTYLE%g
  s%@XMLDCL@%$XMLDCL%g
  s%@DOCBOOK2MANSPEC@%$DOCBOOK2MANSPEC%g
+ s%@IDNLIBS@%$IDNLIBS%g
  s%@BIND9_TOP_BUILDDIR@%$BIND9_TOP_BUILDDIR%g
  s%@BIND9_ISC_BUILDINCLUDE@%$BIND9_ISC_BUILDINCLUDE%g
  s%@BIND9_ISCCC_BUILDINCLUDE@%$BIND9_ISCCC_BUILDINCLUDE%g
***************
*** 9828,9834 ****
  
  # Split the substitutions into bite-sized pieces for seds with
  # small command number limits, like on Digital OSF/1 and HP-UX.
! ac_max_sed_cmds=50 # Maximum number of lines to put in a sed script.
  ac_file=1 # Number of current file.
  ac_beg=1 # First line for current file.
  ac_end=$ac_max_sed_cmds # Line after last line for current file.
--- 10027,10033 ----
  
  # Split the substitutions into bite-sized pieces for seds with
  # small command number limits, like on Digital OSF/1 and HP-UX.
! ac_max_sed_cmds=90 # Maximum number of lines to put in a sed script.
  ac_file=1 # Number of current file.
  ac_beg=1 # First line for current file.
  ac_end=$ac_max_sed_cmds # Line after last line for current file.
Index: configure.in
diff -c mdn/othersrc/bind9/configure.in:1.1.1.9 mdn/othersrc/bind9/configure.in:1.15
*** configure.in	Wed May 22 17:14:53 2002
--- configure.in	Mon May 27 12:10:14 2002
***************
*** 1614,1619 ****
--- 1614,1695 ----
  NOM_PATH_FILE(DOCBOOK2MANSPEC, docbook2X/docbook2man-spec.pl, $sgmltrees)
  
  #
+ # IDN support
+ #
+ AC_ARG_WITH(idn,
+ 	[  --with-idn[=MPREFIX]   enable IDN support using idnkit [default PREFIX]],
+ 	use_idn="$withval", use_idn="no")
+ case "$use_idn" in
+ yes)
+ 	if test X$prefix = XNONE ; then
+ 		idn_path=/usr/local
+ 	else
+ 		idn_path=$prefix
+ 	fi
+ 	;;
+ no)
+ 	;;
+ *)
+ 	idn_path="$use_idn"
+ 	;;
+ esac
+ 
+ iconvinc=
+ iconvlib=
+ AC_ARG_WITH(libiconv,
+ 	[  --with-libiconv[=IPREFIX]   GNU libiconv are in IPREFIX [default PREFIX]],
+ 	use_libiconv="$withval", use_libiconv="no")
+ case "$use_libiconv" in
+ yes)
+ 	if test X$prefix = XNONE ; then
+ 		iconvlib="-L/usr/local/lib -R/usr/local/lib -liconv"
+ 	else
+ 		iconvlib="-L$prefix/lib -R$prefix/lib -liconv"
+ 	fi
+ 	;;
+ no)
+ 	iconvlib=
+ 	;;
+ *)
+ 	iconvlib="-L$use_libiconv/lib -R$use_libiconv/lib -liconv"
+ 	;;
+ esac
+ 
+ AC_ARG_WITH(iconv,
+ 	[  --with-iconv[=LIBSPEC]   specify iconv library [default -liconv]],
+ 	iconvlib="$withval")
+ case "$iconvlib" in
+ no)
+ 	iconvlib=
+ 	;;
+ yes)
+ 	iconvlib=-liconv
+ 	;;
+ esac
+ 
+ AC_ARG_WITH(idnlib,
+ 	[  --with-idnlib=ARG    specify libidnkit],
+ 	idnlib="$withval", idnlib="no")
+ if test "$idnlib" = yes; then
+ 	AC_MSG_ERROR([You must specify ARG for --with-idnlib.])
+ fi
+ 
+ IDNLIBS=
+ if test "$use_idn" != no; then
+ 	AC_DEFINE(WITH_IDN, 1, [define if idnkit support is to be included.])
+ 	STD_CINCLUDES="$STD_CINCLUDES -I$idn_path/include"
+ 	if test "$idnlib" != no; then
+ 		IDNLIBS="$idnlib $iconvlib"
+ 	else
+ 		IDNLIBS="-L$idn_path/lib -lidnkit $iconvlib"
+ 	fi
+ fi
+ AC_SUBST(IDNLIBS)
+ 
+ AC_CHECK_HEADERS(locale.h)
+ AC_CHECK_FUNCS(setlocale)
+ 
+ #
  # Substitutions
  #
  AC_SUBST(BIND9_TOP_BUILDDIR)
Index: bin/dig/Makefile.in
diff -c mdn/othersrc/bind9/bin/dig/Makefile.in:1.1.1.6 mdn/othersrc/bind9/bin/dig/Makefile.in:1.3
*** bin/dig/Makefile.in	Tue Nov 27 16:55:50 2001
--- bin/dig/Makefile.in	Tue Mar 19 16:45:35 2002
***************
*** 36,42 ****
  
  DEPLIBS =	${DNSDEPLIBS} ${ISCDEPLIBS}
  
! LIBS =		${DNSLIBS} ${ISCLIBS} @LIBS@
  
  SUBDIRS =
  
--- 36,42 ----
  
  DEPLIBS =	${DNSDEPLIBS} ${ISCDEPLIBS}
  
! LIBS =		${DNSLIBS} ${ISCLIBS} @IDNLIBS@ @LIBS@
  
  SUBDIRS =
  
Index: bin/dig/dig.1
diff -c mdn/othersrc/bind9/bin/dig/dig.1:1.1.1.2 mdn/othersrc/bind9/bin/dig/dig.1:1.4
*** bin/dig/dig.1	Wed May 22 17:14:53 2002
--- bin/dig/dig.1	Mon May 27 12:10:14 2002
***************
*** 349,354 ****
--- 349,365 ----
  \fI+noqr\fR which means that \fBdig\fR
  will not print the initial query when it looks up the NS records for
  isc.org.
+ .SH "IDN SUPPORT"
+ .PP
+ If \fBdig\fR has been built with IDN (internationalized
+ domain name) support, it can accept and display non-ASCII domain names.
+ \fBdig\fR appropriately converts character encoding of
+ domain name before sending a request to DNS server or displaying a
+ reply from the server.
+ If you'd like to turn off the IDN support for some reason, defines
+ the \fBIDN_DISABLE\fR environment variable.
+ The IDN support is disabled if the the variable is set when 
+ \fBdig\fR runs.
  .SH "FILES"
  .PP
  \fI/etc/resolv.conf\fR
Index: bin/dig/dig.docbook
diff -c mdn/othersrc/bind9/bin/dig/dig.docbook:1.1.1.2 mdn/othersrc/bind9/bin/dig/dig.docbook:1.4
*** bin/dig/dig.docbook	Wed May 22 17:14:53 2002
--- bin/dig/dig.docbook	Mon May 27 12:10:15 2002
***************
*** 523,528 ****
--- 523,543 ----
  </refsect1>
  
  <refsect1>
+ <title>IDN SUPPORT</title>
+ <para>
+ If <command>dig</command> has been built with IDN (internationalized
+ domain name) support, it can accept and display non-ASCII domain names.
+ <command>dig</command> appropriately converts character encoding of
+ domain name before sending a request to DNS server or displaying a
+ reply from the server.
+ If you'd like to turn off the IDN support for some reason, defines
+ the <envar>IDN_DISABLE</envar> environment variable.
+ The IDN support is disabled if the the variable is set when 
+ <command>dig</command> runs.
+ </para>
+ </refsect1>
+ 
+ <refsect1>
  <title>FILES</title>
  <para>
  <filename>/etc/resolv.conf</filename>
Index: bin/dig/dighost.c
diff -c mdn/othersrc/bind9/bin/dig/dighost.c:1.1.1.12 mdn/othersrc/bind9/bin/dig/dighost.c:1.32
*** bin/dig/dighost.c	Wed May 22 17:14:53 2002
--- bin/dig/dighost.c	Mon May 27 12:10:15 2002
***************
*** 32,37 ****
--- 32,48 ----
  #include <string.h>
  #include <limits.h>
  
+ #ifdef HAVE_LOCALE_H
+ #include <locale.h>
+ #endif
+ 
+ #ifdef WITH_IDN
+ #include <idn/result.h>
+ #include <idn/log.h>
+ #include <idn/resconf.h>
+ #include <idn/api.h>
+ #endif
+ 
  #include <dns/byaddr.h>
  #include <dns/fixedname.h>
  #include <dns/message.h>
***************
*** 130,135 ****
--- 141,158 ----
  isc_mutex_t lookup_lock;
  dig_lookup_t *current_lookup = NULL;
  
+ #ifdef WITH_IDN
+ static void	      initialize_idn(void);
+ static isc_result_t   output_filter(isc_buffer_t *buffer,
+ 				    unsigned int used_org,
+ 				    isc_boolean_t absolute);
+ static idn_result_t   append_textname(char *name, const char *origin,
+ 				      size_t namesize);
+ static void	      idn_check_result(idn_result_t r, const char *msg);
+ 
+ #define MAXDLEN               256
+ #endif
+ 
  /*
   * Apply and clear locks at the event level in global task.
   * Can I get rid of these using shutdown events?  XXX
***************
*** 648,653 ****
--- 671,680 ----
  		ISC_LIST_APPEND(server_list, srv, link);
  	}
  
+ #ifdef WITH_IDN
+ 	initialize_idn();
+ #endif
+ 
  	if (keyfile[0] != 0)
  		setup_file_key();
  	else if (keysecret[0] != 0)
***************
*** 1168,1173 ****
--- 1195,1208 ----
  	isc_buffer_t b;
  	dns_compress_t cctx;
  	char store[MXNAME];
+ #ifdef WITH_IDN
+ 	idn_result_t mr;
+ 	char utf8_textname[MXNAME], utf8_origin[MXNAME], idn_textname[MXNAME];
+ #endif
+ 
+ #ifdef WITH_IDN
+ 	dns_name_settotextfilter(output_filter);
+ #endif
  
  	REQUIRE(lookup != NULL);
  	INSIST(!free_now);
***************
*** 1196,1201 ****
--- 1231,1247 ----
  	isc_buffer_init(&lookup->onamebuf, lookup->onamespace,
  			sizeof(lookup->onamespace));
  
+ #ifdef WITH_IDN
+ 	/*
+ 	 * We cannot convert `textname' and `origin' separately.
+ 	 * `textname' doesn't contain TLD, but local mapping needs
+ 	 * TLD.
+ 	 */
+ 	mr = idn_encodename(IDN_LOCALCONV | IDN_DELIMMAP, lookup->textname,
+ 			    utf8_textname, sizeof(utf8_textname));
+ 	idn_check_result(mr, "convert textname to UTF-8");
+ #endif
+ 
  	/*
  	 * If the name has too many dots, force the origin to be NULL
  	 * (which produces an absolute lookup).  Otherwise, take the origin
***************
*** 1204,1215 ****
--- 1250,1290 ----
  	 * is TRUE or we got a domain line in the resolv.conf file.
  	 */
  	/* XXX New search here? */
+ #ifdef WITH_IDN
+ 	if ((count_dots(utf8_textname) >= ndots) || !usesearch)
+ 		lookup->origin = NULL; /* Force abs lookup */
+ 	else if (lookup->origin == NULL && lookup->new_search && usesearch) {
+ 		lookup->origin = ISC_LIST_HEAD(search_list);
+ 	}
+ #else
  	if ((count_dots(lookup->textname) >= ndots) || !usesearch)
  		lookup->origin = NULL; /* Force abs lookup */
  	else if (lookup->origin == NULL && lookup->new_search && usesearch) {
  		lookup->origin = ISC_LIST_HEAD(search_list);
  	}
+ #endif
+ 
+ #ifdef WITH_IDN
  	if (lookup->origin != NULL) {
+ 		mr = idn_encodename(IDN_LOCALCONV | IDN_DELIMMAP,
+ 				    lookup->origin->origin, utf8_origin,
+ 				    sizeof(utf8_origin));
+ 		idn_check_result(mr, "convert origin to UTF-8");
+ 		mr = append_textname(utf8_textname, utf8_origin,
+ 				     sizeof(utf8_textname));
+ 		idn_check_result(mr, "append origin to textname");
+ 	}
+ 	mr = idn_encodename(IDN_LOCALMAP | IDN_NAMEPREP | IDN_ASCCHECK |
+ 			    IDN_IDNCONV | IDN_LENCHECK, utf8_textname,
+ 			    idn_textname, sizeof(idn_textname));
+ 	idn_check_result(mr, "convert UTF-8 textname to IDN encoding");
+ #endif
+ 
+ #ifdef WITH_IDN
+ 	if (0) {
+ #else
+ 	if (lookup->origin != NULL) {
+ #endif
  		debug("trying origin %s", lookup->origin->origin);
  		result = dns_message_gettempname(lookup->sendmsg,
  						 &lookup->oname);
***************
*** 1254,1259 ****
--- 1329,1343 ----
  		if (lookup->trace && lookup->trace_root)
  			dns_name_clone(dns_rootname, lookup->name);
  		else {
+ #ifdef WITH_IDN
+ 			len = strlen(idn_textname);
+ 			isc_buffer_init(&b, idn_textname, len);
+ 			isc_buffer_add(&b, len);
+ 			result = dns_name_fromtext(lookup->name, &b,
+ 						   dns_rootname,
+ 						   ISC_FALSE,
+ 						   &lookup->namebuf);
+ #else
  			len = strlen(lookup->textname);
  			isc_buffer_init(&b, lookup->textname, len);
  			isc_buffer_add(&b, len);
***************
*** 1261,1266 ****
--- 1345,1351 ----
  						   dns_rootname,
  						   ISC_FALSE,
  						   &lookup->namebuf);
+ #endif
  		}
  		if (result != ISC_R_SUCCESS) {
  			dns_message_puttempname(lookup->sendmsg,
***************
*** 2591,2593 ****
--- 2676,2776 ----
  	if (mctx != NULL)
  		isc_mem_destroy(&mctx);
  }
+ 
+ #ifdef WITH_IDN
+ static void
+ initialize_idn(void) {
+ 	idn_result_t r;
+ 
+ #ifdef HAVE_SETLOCALE
+ 	/* Set locale */
+ 	(void)setlocale(LC_ALL, "");
+ #endif
+ 	/* Create configuration context. */
+ 	r = idn_nameinit(1);
+ 	if (r != idn_success)
+ 		fatal("idn api initialization failed: %s",
+ 		      idn_result_tostring(r));
+ 
+ 	/* Set domain name -> text post-conversion filter. */
+ 	dns_name_settotextfilter(output_filter);
+ }
+ 
+ static isc_result_t
+ output_filter(isc_buffer_t *buffer, unsigned int used_org,
+ 	      isc_boolean_t absolute)
+ {
+ 	char tmp1[MAXDLEN], tmp2[MAXDLEN];
+ 	size_t fromlen, tolen;
+ 	isc_boolean_t end_with_dot;
+ 
+ 	/*
+ 	 * Copy contents of 'buffer' to 'tmp1', supply trailing dot
+ 	 * if 'absolute' is true, and terminate with NUL.
+ 	 */
+ 	fromlen = isc_buffer_usedlength(buffer) - used_org;
+ 	if (fromlen >= MAXDLEN)
+ 		return (ISC_R_SUCCESS);
+ 	memcpy(tmp1, (char *)isc_buffer_base(buffer) + used_org, fromlen);
+ 	end_with_dot = (tmp1[fromlen - 1] == '.') ? ISC_TRUE : ISC_FALSE;
+ 	if (absolute && !end_with_dot) {
+ 		fromlen++;
+ 		if (fromlen >= MAXDLEN)
+ 			return (ISC_R_SUCCESS);
+ 		tmp1[fromlen - 1] = '.';
+ 	}
+ 	tmp1[fromlen] = '\0';
+ 
+ 	/*
+ 	 * Convert contents of 'tmp1' to local encoding.
+ 	 */
+ 	if (idn_decodename(IDN_DECODE_APP, tmp1, tmp2, MAXDLEN) != idn_success)
+ 		return (ISC_R_SUCCESS);
+ 	strcpy(tmp1, tmp2);
+ 
+ 	/*
+ 	 * Copy the converted contents in 'tmp1' back to 'buffer'.
+ 	 * If we have appended trailing dot, remove it.
+ 	 */
+ 	tolen = strlen(tmp1);
+ 	if (absolute && !end_with_dot && tmp1[tolen - 1] == '.')
+ 		tolen--;
+ 
+ 	if (isc_buffer_length(buffer) < used_org + tolen)
+ 		return (ISC_R_NOSPACE);
+ 
+ 	isc_buffer_subtract(buffer, isc_buffer_usedlength(buffer) - used_org);
+ 	memcpy(isc_buffer_used(buffer), tmp1, tolen);
+ 	isc_buffer_add(buffer, tolen);
+ 
+ 	return (ISC_R_SUCCESS);
+ }
+ 
+ static idn_result_t
+ append_textname(char *name, const char *origin, size_t namesize) {
+ 	size_t namelen = strlen(name);
+ 	size_t originlen = strlen(origin);
+ 
+ 	/* Already absolute? */
+ 	if (namelen > 0 && name[namelen - 1] == '.')
+ 		return idn_success;
+ 
+ 	/* Append dot and origin */
+ 
+ 	if (namelen + 1 + originlen >= namesize)
+ 		return idn_buffer_overflow;
+ 
+ 	name[namelen++] = '.';
+ 	(void)strcpy(name + namelen, origin);
+ 	return idn_success;
+ }
+ 
+ static void
+ idn_check_result(idn_result_t r, const char *msg) {
+ 	if (r != idn_success) {
+ 		exitcode = 1;
+ 		fatal("%s: %s", msg, idn_result_tostring(r));
+ 	}
+ }
+ 
+ #endif /* WITH_IDN */
Index: bin/dig/host.1
diff -c mdn/othersrc/bind9/bin/dig/host.1:1.1.1.1 mdn/othersrc/bind9/bin/dig/host.1:1.3
*** bin/dig/host.1	Tue Nov 27 16:55:51 2001
--- bin/dig/host.1	Tue Mar 19 16:45:36 2002
***************
*** 120,125 ****
--- 120,136 ----
  effectively wait forever for a reply. The time to wait for a response
  will be set to the number of seconds given by the hardware's maximum
  value for an integer quantity.
+ .SH "IDN SUPPORT"
+ .PP
+ If \fBhost\fR has been built with IDN (internationalized
+ domain name) support, it can accept and display non-ASCII domain names.
+ \fBhost\fR appropriately converts character encoding of
+ domain name before sending a request to DNS server or displaying a
+ reply from the server.
+ If you'd like to turn off the IDN support for some reason, defines
+ the \fBIDN_DISABLE\fR environment variable.
+ The IDN support is disabled if the the variable is set when
+ \fBhost\fR runs.
  .SH "FILES"
  .PP
  \fI/etc/resolv.conf\fR
Index: bin/dig/host.docbook
diff -c mdn/othersrc/bind9/bin/dig/host.docbook:1.1.1.1 mdn/othersrc/bind9/bin/dig/host.docbook:1.3
*** bin/dig/host.docbook	Tue Nov 27 16:55:51 2001
--- bin/dig/host.docbook	Tue Mar 19 16:45:36 2002
***************
*** 181,186 ****
--- 181,201 ----
  </refsect1>
  
  <refsect1>
+ <title>IDN SUPPORT</title>
+ <para>
+ If <command>host</command> has been built with IDN (internationalized
+ domain name) support, it can accept and display non-ASCII domain names.
+ <command>host</command> appropriately converts character encoding of
+ domain name before sending a request to DNS server or displaying a
+ reply from the server.
+ If you'd like to turn off the IDN support for some reason, defines
+ the <envar>IDN_DISABLE</envar> environment variable.
+ The IDN support is disabled if the the variable is set when
+ <command>host</command> runs.
+ </para>
+ </refsect1>
+ 
+ <refsect1>
  <title>FILES</title>
  <para>
  <filename>/etc/resolv.conf</filename>
Index: lib/dns/name.c
diff -c mdn/othersrc/bind9/lib/dns/name.c:1.1.1.10 mdn/othersrc/bind9/lib/dns/name.c:1.14
*** lib/dns/name.c	Wed May 22 17:15:27 2002
--- lib/dns/name.c	Mon May 27 12:10:15 2002
***************
*** 194,199 ****
--- 194,206 ----
  /* XXXDCL make const? */
  dns_name_t *dns_wildcardname = &wild;
  
+ #ifdef WITH_IDN
+ /*
+  * dns_name_t to text post-conversion procedure.
+  */
+ static dns_name_totextfilter_t totext_filter_proc = NULL;
+ #endif
+ 
  static void
  set_offsets(const dns_name_t *name, unsigned char *offsets,
  	    dns_name_t *set_name);
***************
*** 1682,1687 ****
--- 1689,1697 ----
  	unsigned int labels;
  	isc_boolean_t saw_root = ISC_FALSE;
  	char num[4];
+ #ifdef WITH_IDN
+ 	unsigned int oused = target->used;
+ #endif
  
  	/*
  	 * This function assumes the name is in proper uncompressed
***************
*** 1859,1864 ****
--- 1869,1878 ----
  
  	isc_buffer_add(target, tlen - trem);
  
+ #ifdef WITH_IDN
+ 	if (totext_filter_proc != NULL)
+ 		return ((*totext_filter_proc)(target, oused, saw_root));
+ #endif
  	return (ISC_R_SUCCESS);
  }
  
***************
*** 3315,3317 ****
--- 3329,3337 ----
  	return (ISC_R_SUCCESS);
  }
  
+ #ifdef WITH_IDN
+ void
+ dns_name_settotextfilter(dns_name_totextfilter_t proc) {
+ 	totext_filter_proc = proc;
+ }
+ #endif
Index: lib/dns/include/dns/name.h
diff -c mdn/othersrc/bind9/lib/dns/include/dns/name.h:1.1.1.7 mdn/othersrc/bind9/lib/dns/include/dns/name.h:1.10
*** lib/dns/include/dns/name.h	Wed May 22 17:15:29 2002
--- lib/dns/include/dns/name.h	Mon May 27 12:10:15 2002
***************
*** 219,224 ****
--- 219,235 ----
   */
  #define DNS_NAME_MAXWIRE 255
  
+ #ifdef WITH_IDN
+ /*
+  * Text output filter procedure.
+  * 'target' is the buffer to be converted.  The region to be converted
+  * is from 'buffer'->base + 'used_org' to the end of the used region.
+  */
+ typedef isc_result_t (*dns_name_totextfilter_t)(isc_buffer_t *target,
+ 						unsigned int used_org,
+ 						isc_boolean_t absolute);
+ #endif
+ 
  /***
   *** Initialization
   ***/
***************
*** 1244,1249 ****
--- 1255,1268 ----
   *	'size' > 0.
   *
   */
+ 
+ #ifdef WITH_IDN
+ void
+ dns_name_settotextfilter(dns_name_totextfilter_t proc);
+ /*
+  * Call 'proc' at the end of dns_name_totext.
+  */
+ #endif /* WITH_IDN */
  
  #define DNS_NAME_FORMATSIZE (DNS_NAME_MAXTEXT + 1)
  /*
